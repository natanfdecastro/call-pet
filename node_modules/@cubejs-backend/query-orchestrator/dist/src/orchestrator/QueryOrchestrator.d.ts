import { QueryCache } from './QueryCache';
import { PreAggregations } from './PreAggregations';
import { RedisPool, RedisPoolOptions } from './RedisPool';
import { DriverFactoryByDataSource } from './DriverFactory';
interface QueryOrchestratorOptions {
    cacheAndQueueDriver?: 'redis' | 'memory';
    externalDriverFactory?: any;
    redisPoolOptions?: RedisPoolOptions;
    queryCacheOptions?: any;
    preAggregationsOptions?: any;
    rollupOnlyMode?: boolean;
    continueWaitTimeout?: number;
}
export declare class QueryOrchestrator {
    protected readonly redisPrefix: string;
    protected readonly logger: any;
    protected readonly queryCache: QueryCache;
    protected readonly preAggregations: PreAggregations;
    protected readonly redisPool: RedisPool | undefined;
    protected readonly driverFactory: DriverFactoryByDataSource;
    protected readonly rollupOnlyMode: boolean;
    constructor(redisPrefix: string, driverFactory: DriverFactoryByDataSource, logger: any, options?: QueryOrchestratorOptions);
    fetchQuery(queryBody: any): Promise<{
        usedPreAggregations: {
            [index: string]: unknown;
        };
    } | {
        usedPreAggregations: {
            [index: string]: unknown;
        };
        data: any;
        refreshKeyValues: any[];
        lastRefreshTime: Date;
    } | {
        usedPreAggregations: {
            [index: string]: unknown;
        };
        data: any;
        lastRefreshTime?: undefined;
    } | {
        usedPreAggregations: {
            [index: string]: unknown;
        };
        data: any;
        lastRefreshTime: Date;
    }>;
    loadRefreshKeys(query: any): Promise<any[]>;
    queryStage(queryBody: any): Promise<{
        stage: string;
        timeElapsed: number;
    } | {
        stage: string;
        timeElapsed?: undefined;
    }>;
    resultFromCacheIfExists(queryBody: any): Promise<{
        data: any;
        lastRefreshTime: Date;
    }>;
    testConnections(): Promise<void>;
    cleanup(): Promise<void>;
}
export {};
//# sourceMappingURL=QueryOrchestrator.d.ts.map