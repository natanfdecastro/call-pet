!function(e){function t(t){for(var r,o,s=t[0],c=t[1],u=t[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);p.length;)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={1:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="./";var s=this["webpackJsonp@cubejs-client/playground"]=this["webpackJsonp@cubejs-client/playground"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;i.push([802,0,2]),n()}({507:function(e,t,n){},802:function(e,t,n){"use strict";n.r(t);var r,a,i,o,s=n(14),c=n.n(s),u=n(10),l=n(27),d=n(37),p=n.n(d),b=n(49),h=n(91),f=n(71),m=n(72),j=n(88),y=n(87),v=n(0),g=n.n(v),x=(n(236),n(805)),O=n(830),k=n(118),w=n(19),S=n(94),C=n(838),D=n(839),T=n(840),R=n(167),M=n(286),P=n(18),E=n(352),q=n(2),A=Object(P.b)(x.a.Header)(r||(r=Object(w.a)(["\n  && {\n    background-color: var(--dark-02-color);\n    color: white;\n    padding: 0 16px; \n    line-height: 44px; \n    height: 48px;\n  }\n"]))),L=Object(P.b)(R.a)(a||(a=Object(w.a)(["\n  && {\n    background: transparent;\n    border-bottom: 0;\n  }\n"]))),z=Object(P.b)(R.a.Item)(i||(i=Object(w.a)(["\n  &&& {\n    font-size: 15px;\n    font-weight: 500;\n    line-height: 48px;\n    height: 49px;\n    & > a {\n      &, &:hover {\n        opacity: 0.6;\n        color: white;\n      }\n    }\n    &.ant-menu-item-selected,\n    &.ant-menu-item-active {\n      color: white;\n      border-bottom: 2px solid white;\n      \n      &:hover {\n        border-bottom: 2px solid white;      \n      }\n    \n      a {\n        opacity: 1;\n        color: white;\n      }\n    }\n  \n    &:not(.ant-menu-item-selected) {\n      &.ant-menu-item-active,\n      &:hover {\n        color: white;\n        border-bottom: 2px solid white;\n      }\n    }\n  }\n"]))),F=P.b.a(o||(o=Object(w.a)(["\n  &&& {\n    float: right;\n    height: 32px;\n    margin: 8px ",";\n    border: 1px solid rgba(255, 255, 255, 0.35);\n    border-radius: 4px;\n    display: flex;\n    align-items: center;\n    color: white;\n    transition: all 0.25s ease;\n    padding: 0 10px;\n  \n    span {\n      font-size: 14px;\n      margin-right: 10px;\n    }\n  \n    &:hover {\n      border-color: white;\n      color: white;\n    }\n  }\n"])),(function(e){return e.noMargin?"0":"8px"})),Q=function(e){var t=e.selectedKeys,n=Object(E.useMediaQuery)({query:"(min-device-width: 992px)"}),r=Object(E.useMediaQuery)({query:"(max-device-width: 991px)"});return Object(q.jsxs)(A,{children:[Object(q.jsx)("div",{style:{float:"left"},children:Object(q.jsx)("img",{src:"./cubejs-playground-logo.svg",style:{height:28,marginRight:28},alt:""})}),n&&Object(q.jsxs)(L,{theme:"light",mode:"horizontal",selectedKeys:t,children:[Object(q.jsx)(z,{children:Object(q.jsx)(S.a,{to:"/build",children:"Build"})},"/build"),Object(q.jsx)(z,{children:Object(q.jsx)(S.a,{to:"/dashboard",children:"Dashboard App"})},"/dashboard"),Object(q.jsx)(z,{children:Object(q.jsx)(S.a,{to:"/schema",children:"Schema"})},"/schema"),Object(q.jsxs)(F,{noMargin:!0,href:"https://slack.cube.dev",target:"_blank",children:[Object(q.jsx)(C.a,{}),"Slack"]},"slack"),Object(q.jsxs)(F,{href:"https://cube.dev/docs",target:"_blank",children:[Object(q.jsx)(D.a,{}),"Docs"]},"docs")]}),r&&Object(q.jsx)("div",{style:{float:"right"},children:Object(q.jsx)(M.a,{overlay:Object(q.jsxs)(R.a,{children:[Object(q.jsx)(R.a.Item,{children:Object(q.jsx)(S.a,{to:"/build",children:"Build"})},"/build"),Object(q.jsx)(R.a.Item,{children:Object(q.jsx)(S.a,{to:"/dashboard",children:"Dashboard App"})},"/dashboard"),Object(q.jsx)(R.a.Item,{children:Object(q.jsx)(S.a,{to:"/schema",children:"Schema"})},"/schema")]}),children:Object(q.jsx)(T.a,{})})})]})},_=n(29),U={pink:"255, 100, 146",purple:"122, 119, 255","purple-03":"175, 173, 255","purple-04":"202, 201, 255",text:"91, 92, 125","dark-01":"20, 20, 70","dark-02":"67, 67, 107","dark-03":"114, 114, 144","dark-04":"161, 161, 181","dark-05":"213, 213, 226",light:"243, 243, 251"};function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"rgba(".concat(U[e],", ").concat(t,")")}var I={"active-bg":N("purple",.1),"primary-bg":N("purple",.1),"primary-1":N("purple",.9),"primary-2":N("purple",.8),"primary-3":N("purple",.7),"primary-4":N("purple",.6),"primary-5":N("purple",.5),"primary-6":N("purple",.4),"primary-7":N("purple",.3),"primary-8":N("purple",.2),"primary-9":N("purple",.1),"primary-10":N("purple",0),"light-5":N("light",.5),"remove-btn-bg":N("purple",.1),"remove-btn-hover-bg":N("purple",.2),"primary-color":N("purple"),"pink-8":N("pink",.2),"pink-9":N("pink",.1),"heading-color":N("dark",.65),"link-color":N("purple"),"info-color":N("purple"),"layout-body-background":"#f6f6f8;","layout-header-background":"#eeeef5","menu-highlight-color":N("dark-01"),"item-hover-bg":N("light"),"layout-header-height":"48px","font-family":'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", "Avenir Next", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif',"menu-item-font-size":"15px","btn-primary-shadow":"none","btn-text-shadow":"none","modal-body-padding":"32px","form-item-margin-bottom":"23px","disabled-color":N("dark-01",.25),"disabled-bg":N("dark-05",.2),"menu-item-active-bg":N("light"),"font-size-base":"14px","border-radius-base":"4px","padding-lg":"16px"};Object.keys(U).forEach((function(e){return I["".concat(e,"-color")]=N(e)}));var B,V={},Y={};Object.keys(I).forEach((function(e){V["@".concat(e)]=I[e]})),Object.keys(I).forEach((function(e){Y["--".concat(e)]=I[e]}));var J,K,H=Object(P.a)(B||(B=Object(w.a)(["\n  body {\n    ",'\n  }\n\n  body {\n    margin: 0;\n    padding: 0;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    background: #f6f6f8;\n    overflow-x: hidden;\n  }\n\n  .inline-code {\n    margin: 0 1px;\n    padding: 0.2em 0.4em;\n    font-size: 0.9em;\n    background: #f2f4f5;\n    border: 1px solid #eee;\n    border-radius: 3px;\n  }\n  \n  .ant-dropdown-menu::-webkit-scrollbar-track {\n    background: var(--light-color);\n  }\n  \n  .ant-dropdown-menu::-webkit-scrollbar-thumb {\n    border-radius: 4px;\n    background: var(--dark-03-color);\n  }\n  \n  .ant-dropdown-menu::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  } \n  \n  .schema-sidebar .ant-tabs-top-bar {\n    padding: 0 16px;\n  }\n  \n  .schema-sidebar .ant-menu {\n    border: 0;\n  }\n  \n  .ant-layout-header .ant-menu {\n    height: 100%;\n  }\n  \n  .ant-menu-horizontal .ant-menu-item {\n    top: 0;\n    height: 100%;\n  }\n  \n  .ant-select-item.ant-select-item-option-selected:not(.ant-select-item-option-disabled) {\n    color: white;\n  }\n  \n  .ant-popover .ant-popover-inner-content {\n    padding: 0;\n  }\n  \n  \n  code[class*="language-"],\n  pre[class*="language-"] {\n    color: var(--dark-01-color);\n    background: none;\n    /*text-shadow: 0 1px white;*/\n    font-family: "Roboto Mono", Monaco, \'Andale Mono\', \'Ubuntu Mono\', monospace;\n    text-align: left;\n    font-weight: normal;\n    font-size: 14px;\n    line-height: 20px;\n    white-space: pre;\n    word-spacing: normal;\n    word-break: normal;\n    word-wrap: normal;\n    border-radius: 4px;\n    border: none;\n  \n    -moz-tab-size: 4;\n    -o-tab-size: 4;\n    tab-size: 4;\n  \n    -webkit-hyphens: none;\n    -moz-hyphens: none;\n    -ms-hyphens: none;\n    hyphens: none;\n  }\n\n  code {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, "Courier New",\n    monospace;\n  }\n\n  #playground-root {\n    height: 100%;\n  }\n\n  .schema-sidebar,\n  .schema-sidebar .ant-tabs,\n  .schema-sidebar .ant-tabs-content {\n    height: 100%;\n  }\n\n  .schema-sidebar {\n    background: #fff;\n    border-right: 1px solid #eee;\n    padding: 0;\n  }\n\n  .schema-sidebar .ant-tabs-tabpane {\n    /* TODO: replace with flexbox */\n    height: 85%;\n    overflow: auto;\n  }\n\n  .ant-popover-disabled-compatible-wrapper {\n    pointer-events: none;\n  }\n  \n  pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,\n  code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {\n    text-shadow: none;\n    /*background: #b3d4fc;*/\n  }\n  \n  pre[class*="language-"]::selection, pre[class*="language-"] ::selection,\n  code[class*="language-"]::selection, code[class*="language-"] ::selection {\n    text-shadow: none;\n    /*background: #b3d4fc;*/\n  }\n  \n  @media print {\n    code[class*="language-"],\n    pre[class*="language-"] {\n      text-shadow: none;\n    }\n  }\n  \n  /* Code blocks */\n  pre[class*="language-"] {\n    padding: 1em;\n    overflow: auto;\n  }\n  \n  :not(pre) > code[class*="language-"],\n  pre[class*="language-"] {\n    background: transparent;\n  }\n  \n  /* Inline code */\n  :not(pre) > code[class*="language-"] {\n    padding: .1em;\n    border-radius: .3em;\n    white-space: normal;\n  }\n  \n  .token.comment,\n  .token.prolog,\n  .token.doctype,\n  .token.cdata {\n    color: var(--dark-04-color);\n  }\n  \n  .token.punctuation {\n    color: var(--dark-04-color);\n  }\n  \n  .namespace {\n    opacity: .7;\n  }\n  \n  .token.property,\n  .token.tag,\n  .token.boolean,\n  .token.number,\n  .token.constant,\n  .token.symbol,\n  .token.deleted {\n    color: var(--pink-color);\n  }\n  \n  .token.selector,\n  .token.attr-name,\n  .token.string,\n  .token.char,\n  .token.builtin,\n  .token.inserted {\n    color: var(--purple-color);\n  }\n  \n  .token.operator,\n  .token.entity,\n  .token.url,\n  .language-css .token.string,\n  .style .token.string {\n    color: var(--dark-01-color);\n  }\n  \n  .token.atrule,\n  .token.attr-value,\n  .token.keyword {\n    color: var(--dark-01-color);\n  }\n  \n  .token.atrule,\n  .token.keyword {\n    font-weight: 500;\n  }\n  \n  .token.function,\n  .token.class-name {\n    color: var(--pink-color);\n  }\n  \n  .token.regex,\n  .token.important,\n  .token.variable {\n    color: var(--pink-color);\n  }\n  \n  .token.important,\n  .token.bold {\n    font-weight: bold;\n  }\n  \n  .token.italic {\n    font-style: italic;\n  }\n  \n  .token.entity {\n    cursor: help;\n  }\n  \n  .missing-member-tooltip {\n    max-width: none;\n  }\n  \n  .ant-btn-link > span {\n    text-decoration: underline;\n  }\n  \n  a.ant-typography {\n    text-decoration: underline;\n  }\n'])),Object.entries(Y).map((function(e){var t=Object(_.a)(e,2),n=t[0],r=t[1];return"".concat(n,": ").concat(r,";")})).join("\n    ")),W={error:{border:"#FFCCC7",background:"rgb(255, 100, 109, 0.05)",color:"#EF404A"},warning:{border:"#FFE58F",background:"#FFFBE6"},info:{border:"#91D5FF",background:"#E6F7FF"},success:{border:"#B7EB8F",background:"#F6FFED"}},G=Object(P.b)(O.a)(J||(J=Object(w.a)(["\n  && {\n    background: ",";\n    border: 1px solid ",";\n    color: ",";\n    box-sizing: border-box;\n    border-radius: 2px;\n  }\n"])),(function(e){return W[e.type||"info"].background}),(function(e){return W[e.type||"info"].border}),(function(e){var t;return(null===(t=W[e.type||""])||void 0===t?void 0:t.color)||"inherit"})),$=[[49,.5],[0,25],[49,49],[98,25]];function Z(e){return"transform: translate(".concat($[e][0],"%, ").concat($[e][1],"%);")}var X=P.b.img((function(e){var t=e.index;return"\n  display: block;\n  position: absolute;\n  width: 50%;\n  height: 50%;\n  \n  ".concat(null!=t?"\n  animation-name: dice".concat(t,";\n  animation-duration: 2s;\n  animation-iteration-count: infinite;\n  animation-timing-function: ease;\n  z-index: 0;\n  \n  @keyframes dice").concat(t," {\n    ").concat(0===t?"\n    from {\n      ".concat(Z(0),"\n      z-index: 0;\n    }\n    \n    25% {\n      ").concat(Z(0),"\n      z-index: 0;\n    }\n    \n    50% {\n      ").concat(Z(1),"\n      z-index: 0;\n    }\n    \n    51% {\n      z-index: 1;\n    }\n    \n    75% {\n      z-index: 1;\n    }\n\n    to {\n      ").concat(Z(1),"\n      z-index: 1;\n    }\n    "):"","\n    \n    ").concat(1===t?"\n    from {\n      ".concat(Z(1),"\n      z-index: 3;\n    }\n    \n    25% {\n      ").concat(Z(2),"\n      z-index: 3;\n    }\n    \n    75% {\n      ").concat(Z(2),"\n      z-index: 2;\n    }\n    \n    to {\n      ").concat(Z(3),"\n      z-index: 1;\n    }\n    "):"","\n    \n    ").concat(2===t?"\n    from {\n      ".concat(Z(3),"\n      z-index: 1;\n    }\n    \n    50% {\n      ").concat(Z(3),"\n      z-index: 0;\n    }\n    \n    75% {\n      ").concat(Z(0),"\n      z-index: 0;\n    }\n\n    to {\n      ").concat(Z(0),"\n      z-index: 0;\n    }\n    "):"","\n  }\n  "):"","\n")})),ee=function(e){return Object(q.jsx)(X,Object(u.a)({role:"presentation",src:"data:image/svg+xml,%3Csvg width='36' height='41' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M35.899 10.351l-18 10.25L.1 10.25l18-10.25L35.9 10.351z' fill='%23FAFAFF'/%3E%3Cpath d='M18 41L0 30.75l.101-20.5L18 20.5' fill='%23E5E5F6'/%3E%3Cpath d='M36 30.75L18 41V20.6l17.899-10.25L36 30.75z' fill='%23C0C0EA'/%3E%3C/svg%3E",alt:""},e))},te=P.b.div(K||(K=Object(w.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n"])));function ne(e){var t=e.size,n=void 0===t?80:t,r=e.full,a=void 0===r||r,i=Object(q.jsxs)("div",{"data-testid":"cube-loader",role:"img","aria-label":"Loading animation",style:{position:"relative",width:n,height:1.1388888889*n,margin:"0 auto"},children:[Object(q.jsx)(ee,{style:{transform:"translate(0%, 72.5%)"}}),Object(q.jsx)(ee,{style:{transform:"translate(98%, 72.5%)"}}),Object(q.jsx)(ee,{style:{transform:"translate(49%, 96.5%)"}}),Object(q.jsx)(ee,{index:0}),Object(q.jsx)(ee,{index:1}),Object(q.jsx)(ee,{index:2})]},"loader");return a?Object(q.jsx)(te,{children:i}):i}var re,ae=n(824),ie=n(835),oe=ae.a.Text,se=ae.a.Paragraph,ce=P.b.pre(re||(re=Object(w.a)(["\n  padding: 0.4em 0.8em;\n  font-size: 13px;\n"])));function ue(e){var t,n=e.error;return Object(q.jsxs)(ie.b,{direction:"vertical",children:[Object(q.jsx)(oe,{strong:!0,style:{fontSize:18},children:"Error 😢"}),Object(q.jsxs)(se,{children:["Ask about it in"," ",Object(q.jsx)("a",{href:"https://slack.cube.dev",target:"_blank",rel:"noopener noreferrer",children:"Slack"}),". These guys know how to fix this for sure!"]}),Object(q.jsx)(G,{type:"error",message:Object(q.jsx)(ce,{children:(null===(t=n.stack)||void 0===t?void 0:t.toString())||n.toString()})})]})}var le,de,pe=n(62),be=Object(P.b)(pe.a)(le||(le=Object(w.a)(["\n  &&:not(.ant-btn-link) {\n    padding: 5px 12px;\n    height: auto;\n    border-color: var(--dark-05-color); \n    color: var(--text-color);\n    box-shadow: none;\n\n    &:hover, &:active, &:focus {\n      border-color: var(--purple-04-color);\n      color: var(--primary-color);\n    }\n    \n    &:disabled {\n      color: var(--disabled-color);\n      border-color: var(--disabled-color); \n      background-color: white;\n      \n      &:hover, &:active, &:focus {\n        color: var(--disabled-color);\n        border-color: var(--disabled-color); \n      }\n    }\n    \n    &.ant-btn-primary:not([disabled]) {\n      background: var(--primary-color);\n      color: white;\n      border-color: var(--primary-color);\n      place-self: center;\n    }\n    \n    &.ant-btn-background-ghost:not([disabled]) {\n      color: var(--primary-color);\n    }\n    \n    &.ant-btn-icon-only {\n      display: inline-flex;\n      place-items: center;\n      padding: 5px 8px;\n      font-size: 14px;\n      \n      svg {\n        width: 15px;\n        height: 14px;\n      }\n    }\n    \n    .anticon {\n      display: inline-block;\n      height: 14px;\n    }\n    \n    &.ant-btn-sm {\n      padding: 0 8px;\n    }\n  }\n"])));be.Group=Object(P.b)(pe.a.Group)(de||(de=Object(w.a)(["\n  &&& .ant-btn-primary:not([disabled]) {\n    background-color: var(--primary-bg);\n    color: var(--primary-color);\n    border: 1px solid var(--primary-color);\n    \n    &:not(:first-child):not(:last-child) {\n      border-left-color: var(--primary-color);\n      border-right-color: var(--primary-color);\n    }\n    \n    &:first-child {\n      border-right-color: var(--primary-color);\n    }\n    \n    &:last-child {\n      border-left-color: var(--primary-color);\n    }\n  }\n\n  && .ant-btn-primary:not([disabled]) + .ant-btn:not(.ant-btn-primary):not([disabled]) {\n    border-left-color: var(--primary-color);\n    \n    &:hover, &:active, &:focus {\n      border-left-color: var(--primary-color);\n    }\n  }\n  \n  &&& .ant-btn:disabled {\n    background-color: var(--disabled-bg);\n  }\n"])));var he,fe,me=n(831),je=Object(P.b)(me.a)(he||(he=Object(w.a)(["\n  && {\n    border-radius: 8px;\n    border: none;\n  \n    .ant-card-head {\n      border-bottom: 1px solid #D7D7F488;\n      padding: 8px 16px;\n    }\n    \n    .ant-card-head-title {\n      padding: 0;\n      flex: initial;\n    }\n    \n    .ant-card-extra {\n      padding: 0;\n    }\n    \n    .ant-card-head-wrapper {\n      flex-flow: row wrap;\n      place-content: space-between;\n    }\n    \n    .ant-card-head-title {\n      font-size: 18px;\n      line-height: 40px;\n    }\n    \n    .ant-card-body {\n      padding: 16px;\n    }\n  }\n"]))),ye=n(836),ve=Object(P.b)(ye.a)(fe||(fe=Object(w.a)(["\n  && {\n    .ant-popover-inner-content {\n      padding: 0;\n    }\n  }\n"]))),ge=n(293),xe=n.n(ge),Oe=n(227),ke=n.n(Oe),we=null,Se=[],Ce={},De=function(){var e=Object(l.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe()("playground_anonymous")||xe()("playground_anonymous",ke()()),Se.push(Object(u.a)(Object(u.a)(Object(u.a)({},Ce),t),{},{id:ke()(),clientAnonymousId:xe()("playground_anonymous"),clientTimestamp:(new Date).toJSON()})),n=function(){var e=Object(l.a)(c.a.mark((function e(t,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||(t=Se,Se=[]),t.length){e.next=3;break}return e.abrupt("return",null);case 3:return null==r&&(r=10),e.prev=4,a=(new Date).toJSON(),e.next=8,Object(k.a)("https://track.cube.dev/track",{method:"post",body:JSON.stringify(t.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{sentAt:a})}))),headers:{"Content-Type":"application/json"}});case 8:if(!(200!==e.sent.status&&r>0)){e.next=11;break}return e.abrupt("return",n(t,r-1));case 11:e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(4),!(r>0)){e.next=17;break}return e.abrupt("return",n(t,r-1));case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,n){return e.apply(this,arguments)}}(),r=(we||Promise.resolve()).then((function(){return n()})).then((function(){r===we&&(we=null)})),we=r,e.abrupt("return",we);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(e,t){De(Object(u.a)({event:e},t))},Re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Te("Playground Action",Object(u.a)({name:e},t))},Me=(n(507),function(e){Object(j.a)(r,e);var t,n=Object(y.a)(r);function r(){var e;Object(f.a)(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))).state={fatalError:null,context:null,showLoader:!1},e}return Object(m.a)(r,[{key:"componentDidMount",value:(t=Object(l.a)(c.a.mark((function e(){var t,n,r,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.history,setTimeout((function(){return a.setState({showLoader:!0})}),700),window.addEventListener("unhandledrejection",(function(e){var t=e.reason;console.log(t);var n=(t.stack||t).toString();Te("Playground Error",{error:n})})),e.next=5,Object(k.a)("/playground/context");case 5:return n=e.sent,e.next=8,n.json();case 8:r=e.sent,i=r.anonymousId,o={coreServerVersion:r.coreServerVersion,projectFingerprint:r.projectFingerprint},Ce=o,De(Object(u.a)({event:"identify",anonymousId:i},o)),this.setState({context:r},(function(){r.shouldStartConnectionWizardFlow&&t.push("/connection")}));case 11:case"end":return e.stop()}var i,o}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"componentDidCatch",value:function(e,t){Te("Playground Error",{error:(e.stack||e).toString(),info:t.toString()})}},{key:"render",value:function(){var e,t=this.state,n=t.context,r=t.fatalError,a=t.showLoader,i=this.props,o=i.location,s=i.children;return a?null==n?Object(q.jsx)(ne,{}):(r&&console.log(r.stack),Object(q.jsxs)(x.a,{style:{height:"100%"},children:[Object(q.jsx)(H,{}),Object(q.jsx)(Q,{selectedKeys:(e=o.pathname,"/template-gallery"===e?["/dashboard"]:[e])}),Object(q.jsx)(x.a.Content,{style:{height:"100%"},children:r?Object(q.jsx)(O.a,{message:"Error occured while rendering",description:r.stack||"",type:"error"}):s})]})):null}}],[{key:"getDerivedStateFromError",value:function(e){return{fatalError:e}}}]),r}(v.Component)),Pe=Object(b.g)(Me),Ee=n(360),qe=n(208),Ae=n(111),Le=n.p+"static/media/postgres.e67db92e.svg",ze=n.p+"static/media/mysql.376b985e.svg",Fe=n.p+"static/media/athena.3d08e54a.svg",Qe=n.p+"static/media/clickhouse.15d7a0f1.svg",_e=n.p+"static/media/hive.b33891fc.svg",Ue=n.p+"static/media/redshift.b80154fa.svg",Ne=n.p+"static/media/presto.bf9e7a80.svg",Ie=n.p+"static/media/snowflake.7e110f33.svg",Be=n.p+"static/media/oracle.e2b7363b.svg",Ve=n.p+"static/media/mssql.7dc54d0e.svg",Ye=n.p+"static/media/bigquery.47cbd6db.svg",Je=n.p+"static/media/mongodb.23376a66.svg",Ke=n.p+"static/media/druid.7ac8cbb7.svg",He=[{env:"CUBEJS_DB_HOST",title:"Hostname"},{env:"CUBEJS_DB_PORT",title:"Port"}],We=[{env:"CUBEJS_DB_USER",title:"Username"},{env:"CUBEJS_DB_PASS",title:"Password"}],Ge={env:"CUBEJS_DB_NAME",title:"Database"},$e=[{databases:[{title:"PostgreSQL",driver:"postgres",logo:Le},{title:"MySQL",driver:"mysql",logo:ze},{title:"AWS Redshift",drive:"redshift",logo:Ue},{title:"ClickHouse",driver:"clickhouse",logo:Qe},{title:"Hive/SparkSQL",driver:"hive",logo:_e},{title:"Oracle",driver:"oracle",logo:Be}],settings:[].concat(He,[Ge],We)},{databases:[{title:"MS SQL",driver:"mssql",logo:Ve}],settings:[].concat(He,We,[Ge,{env:"CUBEJS_DB_DOMAIN",title:"Domain Name"}])},{databases:[{title:"AWS Athena",driver:"athena",logo:Fe,instructions:'\nSpecify the AWS access and secret keys with the <a href="https://docs.aws.amazon.com/athena/latest/ug/security-iam-athena.html" target="_blank">access necessary to run Athena queries</a>, \nand the target AWS region and <a href="https://docs.aws.amazon.com/athena/latest/ug/querying.html" target="_blank">S3 output location</a> where query results are stored.\n    '}],settings:[{env:"CUBEJS_AWS_KEY",title:"AWS Access Key ID"},{env:"CUBEJS_AWS_SECRET",title:"AWS Secret Access Key"},{env:"CUBEJS_AWS_REGION",title:"AWS Region"},{env:"CUBEJS_AWS_S3_OUTPUT_LOCATION",title:"S3 Output Location"}]},{databases:[{title:"Google Bigquery",driver:"bigquery",logo:Ye,instructions:"\nUpload a service account JSON keyfile to connect to BigQuery.<br/>Alternatively, you can encode the key file with base64 and specify it manually.\n    "}],settings:[{env:"CUBEJS_DB_BQ_KEY_FILE",title:"Upload a Service Account JSON file",type:"base64upload",uploadTarget:"CUBEJS_DB_BQ_CREDENTIALS",extractField:{jsonField:"project_id",formField:"CUBEJS_DB_BQ_PROJECT_ID"}},{env:"CUBEJS_DB_BQ_PROJECT_ID",title:"Project ID"},{env:"CUBEJS_DB_BQ_CREDENTIALS",title:"Encoded Key File"}]},{databases:[{title:"MongoDB",driver:"mongobi",logo:Je}],settings:[].concat(He,We,[Ge])},{databases:[{title:"Snowflake",driver:"snowflake",logo:Ie}],settings:[].concat(We,[Ge,{env:"CUBEJS_DB_SNOWFLAKE_ACCOUNT",title:"Account"},{env:"CUBEJS_DB_SNOWFLAKE_REGION",title:"Region"},{env:"CUBEJS_DB_SNOWFLAKE_WAREHOUSE",title:"Warehouse"},{env:"CUBEJS_DB_SNOWFLAKE_ROLE",title:"Role"}])},{databases:[{title:"Presto",driver:"prestodb",logo:Ne}],settings:[].concat(He,We,[{env:"CUBEJS_DB_CATALOG",title:"Catalog"},{env:"CUBEJS_DB_SCHEMA",title:"Schema"}])},{databases:[{title:"Druid",driver:"druid",logo:Ke}],settings:[{env:"CUBEJS_DB_URL",title:"URL"}].concat(We)}],Ze=n(483),Xe={"angular-cli":{files:{"src/polyfills.ts":{content:"import 'core-js/proposals/reflect-metadata';\nimport 'zone.js/dist/zone';"},"src/main.ts":{content:"import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));"},"src/index.html":{content:'<!DOCTYPE html>\n        <html lang="en">\n          <head>\n            <meta charset="utf-8" />\n            <title>AngularCharts</title>\n            <base href="/" />\n            <meta name="viewport" content="width=device-width, initial-scale=1" />\n            <link rel="icon" type="image/x-icon" href="favicon.ico" />\n          </head>\n          <body>\n            <app-root></app-root>\n          </body>\n        </html>\n        '},".angular-cli.json":{content:'{\n          "apps": [\n            {\n              "root": "src",\n              "outDir": "dist",\n              "index": "index.html",\n              "main": "main.ts",\n              "polyfills": "polyfills.ts",\n              "styles": [],\n              "scripts": []\n            }\n          ]\n        }'}},dependencies:{"zone.js":"latest","@angular/platform-browser-dynamic":"latest","@angular/platform-browser":"latest","@angular/compiler":"latest",rxjs:"latest","@angular/common":"latest"}},"create-react-app":{dependencies:{"react-dom":"latest"}}};function et(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e){var r=new CustomEvent("__cubejsPlaygroundEvent",{bubbles:!0,composed:!0,detail:Object(u.a)(Object(u.a)({},n),{},{eventType:t})});e.dispatchEvent(r)}}function tt(e,t,n){return Promise.race([fetch(e,t),new Promise((function(e,t){return setTimeout((function(){return t(new Error("timeout"))}),n)}))])}function nt(e){return rt.apply(this,arguments)}function rt(){return(rt=Object(l.a)(c.a.mark((function e(t){var n,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"Copied to clipboard",navigator.clipboard||Ze.a.error({message:"Your browser doesn't support copy to clipboard"}),e.prev=2,e.next=5,navigator.clipboard.writeText(t);case 5:Ze.a.success({message:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Ze.a.error({message:"Can't copy to clipboard",description:e.t0});case 11:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}var at=n(459),it=n(146);function ot(e){var t=e.loading,n=e.result;return t?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(at.a,{}),"  Testing database connection"]}):(null==n?void 0:n.success)?Object(q.jsxs)(ae.a.Text,{type:"success",children:[Object(q.jsx)(it.a,{}),"  Connection successful"]}):(null==n?void 0:n.error)?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(ae.a.Text,{type:"danger",children:"We couldn’t connect. Please double check the provided data and try again"}),Object(q.jsx)(O.a,{style:{marginTop:20},message:"Runtime Error",type:"error",description:Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("p",{style:{paddingLeft:20},children:"Cube.js was unable to connect to the specified database."}),Object(q.jsx)("p",{style:{paddingLeft:20},children:"The database returned the following error:"}),Object(q.jsx)("br",{}),Object(q.jsx)("p",{style:{paddingLeft:40},children:">Database Error"}),Object(q.jsx)("p",{style:{paddingLeft:40},children:n.error.toString()}),Object(q.jsx)("br",{}),Object(q.jsx)("p",{children:"Check your database credentials and try again. For more information, visit:"}),Object(q.jsx)("a",{href:"https://cube.dev/docs/connecting-to-the-database",target:"_blank",children:"https://cube.dev/docs/connecting-to-the-database"})]})})]}):null}var st,ct=n(822);function ut(e){var t=e.db;return Object(q.jsx)(me.a,{children:Object(q.jsxs)(qe.a,{align:"middle",justify:"space-between",children:[Object(q.jsx)(Ae.a,{flex:"40px",children:Object(q.jsx)(ct.a,{src:t.logo,preview:!1})}),Object(q.jsx)(Ae.a,{children:Object(q.jsx)(ae.a.Text,{strong:!0,children:t.title})})]})})}var lt=P.b.div(st||(st=Object(w.a)(["\n  background-color: #f8f8f9;\n  padding: 15px 20px;\n  border-radius: 4px;\n"])));function dt(e){var t=e.db;return Object(q.jsx)(lt,{children:Object(q.jsxs)(qe.a,{align:"middle",justify:"space-between",children:[Object(q.jsx)(Ae.a,{flex:"40px",children:Object(q.jsx)(ct.a,{src:t.logo,preview:!1})}),Object(q.jsx)(Ae.a,{children:Object(q.jsx)(ae.a.Text,{strong:!0,children:t.title})})]})})}var pt=n(823),bt=n(827),ht=n(89),ft=n(819),mt=n(841),jt=ae.a.Text;function yt(e){var t=e.onInput,n=(Object(ht.a)(e,["onInput"]),Object(v.useState)("")),r=Object(_.a)(n,2),a=r[0],i=r[1],o=Object(v.useState)(""),s=Object(_.a)(o,2),c=s[0],l=s[1],d={name:"file",headers:{authorization:"authorization-text"},accept:"application/json, .json",beforeUpload:function(e){var n=new FileReader;return n.onload=function(e){var n="",r=e.target.result.toString();try{JSON.parse(r),n=btoa(r)}catch(e){l("Invalid JSON file"),console.error(e)}t&&t({encoded:n,raw:JSON.parse(r)})},n.readAsText(e),!1},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?i(e.file.name):"error"===e.file.status&&(console.log("".concat(e.file.name," file upload failed.")),l("Invalid file"))},onRemove:function(){l("")}};return Object(q.jsxs)(ie.b,{direction:"vertical",children:[Object(q.jsx)(ft.a,Object(u.a)(Object(u.a)({},d),{},{children:Object(q.jsx)(pe.a,{icon:Object(q.jsx)(mt.a,{}),children:"Choose file"})})),a||c?null:Object(q.jsx)(jt,{type:"secondary",children:"No file selected"}),c&&Object(q.jsx)(jt,{type:"danger",children:c})]})}function vt(e){var t=e.db,n=e.deployment,r=e.loading,a=void 0!==r&&r,i=e.disabled,o=void 0!==i&&i,s=e.onSubmit,c=e.onCancel,u=pt.a.useForm(),l=Object(_.a)(u,1)[0],d=(n.envVariables||[]).reduce((function(e,t){return e[t.name]=t.value,e}),{});return Object(q.jsxs)(pt.a,{form:l,layout:"vertical",onFinish:function(e){e.CUBEJS_DB_TYPE=t.driver,s(e)},initialValues:d,children:[t.settings.map((function(e){return"base64upload"===e.type?Object(q.jsx)(yt,{onInput:function(t){var n=t.raw,r=t.encoded;e.uploadTarget&&l.setFieldsValue({[e.uploadTarget]:r}),e.extractField&&l.setFieldsValue({[e.extractField.formField]:n[e.extractField.jsonField]})}}):Object(q.jsx)(pt.a.Item,{label:e.title||e.env,name:e.env,children:e.title?Object(q.jsx)(bt.a,{}):Object(q.jsx)(bt.a.TextArea,{rows:1,style:{overflow:"hidden",resize:"none"}})},e.env)})),Object(q.jsxs)(ie.b,{children:[Object(q.jsx)(pe.a,{type:"primary",htmlType:"submit",loading:a,disabled:o,children:"Apply"}),Object(q.jsx)(pe.a,{onClick:c,"data-qa":"SetUpLater",children:"Set Up Later"})]})]})}var gt,xt,Ot,kt,wt,St=n(486),Ct=Object(P.b)(pe.a)(gt||(gt=Object(w.a)(["\n  border: none;\n  color: var(--primary-1);\n"]))),Dt=Object(P.b)(O.a)(xt||(xt=Object(w.a)(["\n  border: none;\n  padding: 16px;\n"]))),Tt=Object(P.b)(pt.a)(Ot||(Ot=Object(w.a)(["\n  .ant-form-item {\n    margin-bottom: 20px;\n  }\n\n  .ant-form-item:last-child {\n    margin-bottom: 0;\n  }\n\n  .ant-form-item-label {\n    padding-bottom: 4px;\n  }\n"])));function Rt(e){var t=e.label,n=e.value,r=Object(ht.a)(e,["label","value"]),a=Object(q.jsx)(Ct,{icon:Object(q.jsx)(St.a,{}),onClick:function(){return nt(n)}});return Object(q.jsx)(pt.a.Item,{label:t?Object(q.jsx)("b",{children:t}):null,labelCol:{span:24},wrapperCol:{span:24},children:Object(q.jsx)(bt.a,Object(u.a)({value:n,suffix:a},r))})}function Mt(){return Object(q.jsx)(Dt,{type:"warning",message:Object(q.jsxs)(ie.b,{direction:"vertical",size:"middle",children:[Object(q.jsxs)(ae.a.Text,{children:["To connect to the database running on the localhost use the following ",Object(q.jsx)("b",{children:"hostname"})," value"]}),Object(q.jsxs)(Tt,{children:[Object(q.jsx)(Rt,{label:"Mac",value:"host.docker.internal"}),Object(q.jsx)(Rt,{label:"Windows",value:"docker.for.win.localhost"}),Object(q.jsx)(Rt,{label:"Linux",value:"localhost"}),Object(q.jsxs)(ie.b,{direction:"vertical",size:"middle",children:[Object(q.jsxs)(ae.a.Text,{children:["Please note, for Linux, you need to run Cube.js Docker container in the"," ",Object(q.jsx)(ae.a.Link,{href:"https://docs.docker.com/network/host/",target:"_blank",children:'network mode "host"'})," ","to be able to connect to the database running on localhost."]}),Object(q.jsx)(Rt,{value:"docker run --network host"})]})]})]})})}var Pt=ae.a.Title,Et=ae.a.Paragraph,qt=P.b.div(kt||(kt=Object(w.a)(["\n  cursor: pointer;\n"]))),At=$e.reduce((function(e,t){var n=t.databases,r=t.settings;return[].concat(Object(Ee.a)(e),Object(Ee.a)(n.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{settings:r})}))))}),[]);function Lt(e){return zt.apply(this,arguments)}function zt(){return(zt=Object(l.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt("/playground/test-connection",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({variables:t})},5e3);case 2:return n=e.sent,e.next=5,n.json();case 5:if(r=e.sent,!(a=r.error)){e.next=9;break}throw new Error(a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ft=P.b.div(wt||(wt=Object(w.a)(["\n  width: auto;\n  max-width: 960px;\n  padding: 48px 24px;\n  margin: 0 auto;\n  background-color: #fff;\n"])));function Qt(e){return _t.apply(this,arguments)}function _t(){return(_t=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/playground/env",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({variables:t})});case 2:return e.next=4,fetch("/restart");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ut(e){var t=e.history,n=Object(v.useState)(!1),r=Object(_.a)(n,2),a=r[0],i=r[1],o=Object(v.useState)(!1),s=Object(_.a)(o,2),u=s[0],d=s[1],p=Object(v.useState)(null),b=Object(_.a)(p,2),h=b[0],f=b[1],m=Object(v.useState)(null),j=Object(_.a)(m,2),y=j[0],g=j[1];return Object(q.jsxs)(Ft,{children:[Object(q.jsx)(Pt,{children:"Set Up a Database connection"}),y?Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)(ie.b,{direction:"vertical",size:"large",children:[Object(q.jsxs)(ie.b,{size:"middle",children:[Object(q.jsx)(dt,{db:y}),Object(q.jsx)(be,{type:"link",onClick:function(){return g(null)},children:"Change"})]}),Object(q.jsxs)(qe.a,{gutter:[40,12],children:[Object(q.jsx)(Ae.a,{span:24,children:Object(q.jsx)(ae.a,{children:y.instructions?Object(q.jsx)("p",{children:Object(q.jsx)("span",{dangerouslySetInnerHTML:{__html:y.instructions}})}):Object(q.jsxs)("p",{children:["Enter database credentials to connect to your database."," ",Object(q.jsx)("br",{}),"Cube.js will store your credentials into the .env file for future use."]})})}),Object(q.jsx)(Ae.a,{span:12,children:Object(q.jsx)(vt,{db:y,deployment:{},loading:a,disabled:u,onCancel:function(){},onSubmit:function(){var e=Object(l.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(null),d(!0),e.next=5,Lt(n);case 5:return f({success:!0}),i(!0),e.next=9,Qt(n);case 9:i(!1),t.push("/schema"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),f({success:!1,error:e.t0});case 16:d(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()})}),["MySQL","PostgreSQL","Druid","Clickhouse"].includes((null==y?void 0:y.title)||"")&&Object(q.jsx)(Ae.a,{span:12,children:Object(q.jsx)(Mt,{})})]}),Object(q.jsx)(qe.a,{children:Object(q.jsx)(Ae.a,{span:12,children:Object(q.jsx)(ot,{loading:u,result:h})})})]})}):Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(Et,{children:"Select a database type"}),Object(q.jsx)(qe.a,{gutter:[12,12],children:At.map((function(e){return Object(q.jsx)(Ae.a,{xl:8,lg:8,md:12,sm:24,xs:24,children:Object(q.jsx)(qt,{onClick:function(){return g(e)},children:Object(q.jsx)(ut,{db:e})})},e.title)}))})]})]})}var Nt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.retries,a=Object(ht.a)(n,["retries"]);return r=r||0,Object(k.a)(t,a).then(function(){var e=Object(l.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(500!==t.status){e.next=6;break}return e.next=3,t.text();case 3:n=e.sent;try{r=JSON.parse(n),n=r.error}catch(e){}throw n;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(a){if("Network request failed"===a.message&&r>0)return e(t,{options:n,retries:r-1});throw a}))},It=function(e,t,n){return Nt(e,Object(u.a)(Object(u.a)({},t),{},{retries:n}))},Bt=function(){function e(){Object(f.a)(this,e),this.loadError=null,this.dashboardCreated=!1,this.installedTemplates=void 0,this.playgroundContext=void 0}var t,n,r,a,i,o;return Object(m.a)(e,[{key:"load",value:(o=Object(l.a)(c.a.mark((function e(){var t,n,r,a=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],e.next=3,It("/playground/dashboard-app-create-status".concat(t?"?instant=true":""),void 0,10);case 3:return n=e.sent,e.next=6,n.json();case 6:(r=e.sent).error?this.loadError=r.error:(this.dashboardCreated="created"===r.status,this.installedTemplates=r.installedTemplates);case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"applyTemplatePackages",value:(i=Object(l.a)(c.a.mark((function e(t){var n,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:null,this.playgroundContext){e.next=5;break}return e.next=4,this.loadContext();case 4:this.playgroundContext=e.sent;case 5:return e.abrupt("return",Nt("/playground/apply-template-packages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({toApply:t,templateConfig:n||{credentials:this.playgroundContext}})}));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"loadContext",value:(a=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt("/playground/context");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",{cubejsToken:n.cubejsToken,apiUrl:n.apiUrl||window.location.href.split("#")[0].replace(/\/$/,"")});case 7:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"templatePackages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"react";return"react"===e.toLowerCase()?[{name:"react-antd-dynamic",description:"React Antd Dynamic"},{name:"react-antd-static",description:"React Antd Static"},{name:"react-material-static",description:"React Material UI Static"}]:"angular"===e.toLowerCase()?[{name:"ng-material-dynamic",description:"Angular Material UI Dynamic"}]:"vue"===e.toLowerCase()?[{name:"vue-vuetify-dynamic",description:"Vue Vuetify UI Dynamic"}]:[]}},{key:"canAddChart",value:(r=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(!this.loadError){e.next=4;break}return e.abrupt("return",this.loadError);case 4:return e.abrupt("return",!!Object.keys(this.installedTemplates).find((function(e){return e.match(/-static$/)})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"addChart",value:(n=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(!this.loadError){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.applyTemplatePackages(["create-react-app",Object.keys(this.installedTemplates).find((function(e){return e.match(/-static$/)})),"static-chart"],{chartCode:t});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"templates",value:(t=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt("/playground/manifest");case 2:return e.next=4,e.sent.json();case 4:return t=e.sent,n=t.templates,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}(),Vt=function(e){var t=e.children;return Object(q.jsx)("div",{style:{textAlign:"center",marginTop:50},children:t})},Yt=function(){return Object(q.jsxs)("p",{style:{width:450,margin:"20px auto"},children:["Dashboard App is a convenient way to setup and deploy frontend app to work with Cube.js backend. You can learn more about in the"," ",Object(q.jsx)("a",{href:"https://cube.dev/docs/dashboard-app",target:"_blankl",children:"Cube.js docs"}),"."]})},Jt=function(e){Object(j.a)(i,e);var t,n,r,a=Object(y.a)(i);function i(e){var t;return Object(f.a)(this,i),(t=a.call(this,e)).dashboardSource=new Bt,t.state={},t}return Object(m.a)(i,[{key:"componentDidMount",value:(r=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadDashboard();case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"loadDashboard",value:(n=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({appCode:null,loadError:null}),e.prev=1,e.next=4,this.dashboardSource.load();case 4:return this.setState({dashboardStarting:!1,appCode:!this.dashboardSource.loadError&&this.dashboardSource.dashboardCreated,loadError:this.dashboardSource.loadError}),e.next=7,Nt("/playground/dashboard-app-status");case 7:return e.next=9,e.sent.json();case 9:t=e.sent,this.setState({dashboardRunning:t.running,dashboardPort:t.dashboardPort,dashboardAppPath:t.dashboardAppPath}),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(1),this.setState({dashboardStarting:!1,loadError:Object(q.jsx)("pre",{children:e.t0.toString()})}),e.t0;case 17:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(){return n.apply(this,arguments)})},{key:"startDashboardApp",value:(t=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({dashboardStarting:!0}),e.next=3,Nt("/playground/start-dashboard-app");case 3:return e.next=5,this.loadDashboard();case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.appCode,r=t.dashboardPort,a=t.loadError,i=t.dashboardRunning,o=t.dashboardStarting,s=t.dashboardAppPath;if(a&&"string"==typeof a&&-1!==a.indexOf("Dashboard app not found"))return Object(q.jsx)(b.a,{to:"/template-gallery"});if(a)return Object(q.jsxs)(Vt,{children:[Object(q.jsx)("h2",{children:a}),Object(q.jsx)("p",{style:{marginTop:25},children:Object(q.jsx)(S.a,{to:"/template-gallery",children:Object(q.jsx)(pe.a,{type:"primary",children:"Create dashboard app in your project directory"})})}),Object(q.jsx)(Yt,{})]});if(!n)return Object(q.jsxs)(Vt,{children:[Object(q.jsx)("h2",{children:" Creating Dashboard App"}),Object(q.jsx)("div",{children:Object(q.jsx)(at.a,{tip:"It may take several minutes. Please check console for progress..."})}),Object(q.jsx)(Yt,{})]});if(!i)return Object(q.jsxs)(Vt,{children:[Object(q.jsx)("h2",{children:"Dashboard App is not running"}),Object(q.jsxs)("h3",{children:["Please start dashboard app or run it manually using",Object(q.jsx)("code",{className:"inline-code",children:"$ npm run start"}),Object(q.jsx)("br",{}),"in ",Object(q.jsx)("b",{children:s})," directory."]}),Object(q.jsx)("p",{style:{marginTop:25},children:Object(q.jsx)(pe.a,{type:"primary",size:"large",loading:o,onClick:function(){return e.startDashboardApp()},children:o?"Dashboard app is starting. It may take a while. Please check console for progress...":"Start dashboard app"})}),Object(q.jsx)(Yt,{})]});var c="http://".concat(window.location.hostname,":").concat(r);return Object(q.jsxs)("div",{style:{height:"100%",width:"100%",padding:"15px 30px 30px 30px",background:"#fff"},children:[Object(q.jsx)(O.a,{message:Object(q.jsxs)("span",{children:["This dashboard app can be edited at ",Object(q.jsx)("b",{children:s}),". Dev server is running at ",Object(q.jsx)("a",{href:c,target:"_blank",rel:"noopener noreferrer",children:c}),". Learn more how to customize and deploy it at ",Object(q.jsx)("a",{href:"https://cube.dev/docs/dashboard-app",children:"Cube.js docs"}),". ",Object(q.jsx)("a",{onClick:function(){return window.location.reload()},style:{cursor:"pointer"},children:"Refresh page"})," if it is empty."]}),type:"info",closable:!0,style:{marginBottom:15}}),Object(q.jsx)("iframe",{src:c,style:{width:"100%",height:"100%",border:0,borderRadius:4,overflow:"hidden"},sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin",title:"Dashboard"})]})}}]),i}(v.Component),Kt=Object(b.g)(Jt),Ht=(n(370),n(381),n(382),n(383),n(253),n(388),n(583),n(390),n(391),n(393),n(394),n(395),n(396),n(397),n(405),n(322),n(406),n(408),n(593),n(595),n(596),n(599),n(600),n(602),n(603),n(415),n(604),n(605),n(606),n(609),n(610),n(611),n(613),n(70)),Wt=n.n(Ht),Gt=n(40),$t=n.n(Gt),Zt=n(99),Xt=n.n(Zt),en=n(68),tn=n.n(en),nn=n(73),rn=n.n(nn),an=n(24),on=n.n(an),sn=n(122),cn=n.n(sn),un=n(50),ln=n.n(un),dn=n(33),pn=n.n(dn),bn=n(832),hn=n(198),fn=n(833),mn=n(463),jn=n(806),yn=n(807),vn=n(479),gn=n(808),xn=n(829),On=n(842),kn=n(809),wn=n(810),Sn=n(811),Cn=n(834),Dn=n(843),Tn=n(828),Rn=n(812),Mn=(n(813),n(480)),Pn=n(97),En=n.n(Pn),qn=n(460),An=n(461),Ln=n.n(An),zn=(n(624),n(105)),Fn=n.n(zn),Qn=n(188),_n=n.n(Qn),Un=n(123),Nn=n.n(Un),In=n(462),Bn=n.n(In);function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){$t()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jn=Object(qn.extendMoment)(En.a),Kn={day:function(e){return Array.from(e.by("day")).map((function(e){return e.format("YYYY-MM-DDT00:00:00.000")}))},month:function(e){return Array.from(e.snapTo("month").by("month")).map((function(e){return e.format("YYYY-MM-01T00:00:00.000")}))},year:function(e){return Array.from(e.snapTo("year").by("year")).map((function(e){return e.format("YYYY-01-01T00:00:00.000")}))},hour:function(e){return Array.from(e.by("hour")).map((function(e){return e.format("YYYY-MM-DDTHH:00:00.000")}))},minute:function(e){return Array.from(e.by("minute")).map((function(e){return e.format("YYYY-MM-DDTHH:mm:00.000")}))},second:function(e){return Array.from(e.by("second")).map((function(e){return e.format("YYYY-MM-DDTHH:mm:ss.000")}))},week:function(e){return Array.from(e.snapTo("isoweek").by("week")).map((function(e){return e.startOf("isoweek").format("YYYY-MM-DDT00:00:00.000")}))}},Hn=/^\d\d\d\d-\d\d-\d\d$/,Wn=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z?$/,Gn=function(e){var t=new Map;return function(n){return n.forEach((function(n){var r=e(n);t.has(r)||t.set(r,[]),t.get(r).push(n)})),Array.from(t.entries())}},$n={REGULAR_QUERY:"regularQuery",COMPARE_DATE_RANGE_QUERY:"compareDateRangeQuery",BLENDING_QUERY:"blendingQuery"},Zn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(tn()(this,e),this.loadResponse=t,null!=this.loadResponse.queryType?(this.queryType=t.queryType,this.loadResponses=t.results):(this.queryType=$n.REGULAR_QUERY,this.loadResponse.pivotQuery=Yn(Yn({},t.query),{},{queryType:this.queryType}),this.loadResponses=[t]),!Object.values($n).includes(this.queryType))throw new Error("Unknown query type");this.parseDateMeasures=n.parseDateMeasures,this.options=n,this.backwardCompatibleData=[]}return rn()(e,[{key:"drillDown",value:function(e,t){if(this.queryType===$n.COMPARE_DATE_RANGE_QUERY)throw new Error("compareDateRange drillDown query is not currently supported");if(this.queryType===$n.BLENDING_QUERY)throw new Error("Data blending drillDown query is not currently supported");var n=e.xValues,r=void 0===n?[]:n,a=e.yValues,i=void 0===a?[]:a,o=this.normalizePivotConfig(t),s=[];o.x.forEach((function(e,t){return s.push([e,r[t]])})),o.y.forEach((function(e,t){return s.push([e,i[t]])}));var c=this.query(),u=c.filters,l=void 0===u?[]:u,d=c.segments,p=void 0===d?[]:d,b=this.loadResponses[0].annotation.measures,h=s.find((function(e){return"measures"===pn()(e,1)[0]}))||[],f=pn()(h,2)[1];if(void 0===f){var m=Object.keys(b);f=pn()(m,1)[0]}if(!(b[f]&&b[f].drillMembers||[]).length)return null;var j=[{member:f,operator:"measureFilter"}].concat(ln()(l)),y=[];s.filter((function(e){return"measures"!==pn()(e,1)[0]})).forEach((function(e){var t=pn()(e,2),n=t[0],r=t[1],a=n.split("."),i=pn()(a,3),o=i[0],s=i[1],c=i[2];if(void 0!==c){var u=Jn.range(r,r).snapTo(c);y.push({dimension:[o,s].join("."),dateRange:[u.start,u.end].map((function(e){return e.format(Jn.HTML5_FMT.DATETIME_LOCAL_MS)}))})}else null==r?j.push({member:n,operator:"notSet"}):j.push({member:n,operator:"equals",values:[r.toString()]})}));var v=this.loadResponses[0].query;return 0===y.length&&v.timeDimensions.length>0&&null==v.timeDimensions[0].granularity&&y.push(v.timeDimensions[0]),Yn(Yn(Yn({},b[f].drillMembersGrouped),{},{filters:j},p.length>0?{segments:p}:{}),{},{timeDimensions:y,segments:p,timezone:v.timezone})}},{key:"series",value:function(e){var t=this;return this.seriesNames(e).map((function(n){var r=n.title,a=n.key;return{title:r,key:a,series:t.chartPivot(e).map((function(e){var t=e.category,n=e.x;return{value:cn()(e,["category","x"])[a],category:t,x:n}}))}}))}},{key:"axisValues",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.loadResponses[t].query;return function(t){var r=function(n){return e.filter((function(e){return"measures"!==e})).map((function(e){return null!=t[e]?t[e]:null})).concat(n?[n]:[])};return e.find((function(e){return"measures"===e}))&&(n.measures||[]).length?n.measures.map(r):[r()]}}},{key:"axisValuesString",value:function(e,t){return e.map((function(e){return null==e?"∅":""===e?"[Empty string]":e})).join(t||", ")}},{key:"normalizePivotConfig",value:function(t){return e.getNormalizedPivotConfig(this.loadResponse.pivotQuery,t)}},{key:"timeSeries",value:function(t){if(!t.granularity)return null;var n=t.dateRange;if(!n){var r=Object(bn.a)(Object(hn.a)((function(n){return n[e.timeDimensionMember(t)]&&Jn(n[e.timeDimensionMember(t)])})),Object(fn.a)((function(e){return!!e})))(this.timeDimensionBackwardCompatibleData());n=r.length&&[Object(mn.a)(Object(jn.a)((function(e){return e.toDate()})),r[0],r),Object(mn.a)(Object(yn.a)((function(e){return e.toDate()})),r[0],r)]||null}if(!n)return null;var a=t.dateRange?t.dateRange.find((function(e){return e.match(Hn)})):!["hour","minute","second"].includes(t.granularity),i=n,o=pn()(i,2),s=o[0],c=o[1],u=Jn.range(s,c);if(!Kn[t.granularity])throw new Error("Unsupported time granularity: ".concat(t.granularity));return Kn[t.granularity](a?u.snapTo("day"):u)}},{key:"pivot",value:function(t){var n=this;t=this.normalizePivotConfig(t);var r=this.loadResponse.pivotQuery,a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=Gn((function(e){var t=e.xValues;return n.axisValuesString(t)})),o=function(e,t){return e[t]};if(t.fillMissingDates&&1===t.x.length&&Object(vn.a)(t.x,(r.timeDimensions||[]).filter((function(e){return!!e.granularity})).map((function(t){return e.timeDimensionMember(t)})))){var s=n.loadResponses.map((function(e){return n.timeSeries(e.query.timeDimensions[0])}));s[0]&&(i=function(e){var t=Object(gn.a)((function(e){var t=e.xValues;return Jn(t[0]).format(Jn.HTML5_FMT.DATETIME_LOCAL_MS)}),e);return s[a].map((function(e){return[e,t[e]||[{xValues:[e],row:{}}]]}))},o=function(e,t){return e[t]||0})}var c=Object(bn.a)(Object(hn.a)((function(e){return n.axisValues(t.x,a)(e).map((function(t){return{xValues:t,row:e}}))})),xn.a,i)(n.timeDimensionBackwardCompatibleData(a)),u=Object(bn.a)(Object(hn.a)((function(e){var r=pn()(e,2)[1];return Object(xn.a)(r.filter((function(e){var t=e.row;return Object.keys(t).length>0})).map((function(e){var r=e.row;return n.axisValues(t.y,a)(r)})))})),xn.a,On.a)(c);return c.map((function(r){var i=pn()(r,2)[1],s=i[0].xValues,c=Object(bn.a)(Object(hn.a)((function(e){var r=e.row;return n.axisValues(t.y,a)(r).map((function(e){return{yValues:e,row:r}}))})),xn.a,Object(gn.a)((function(e){var t=e.yValues;return n.axisValuesString(t)})))(i);return{xValues:s,yValuesArray:Object(xn.a)(u.map((function(r){var a=t.x.find((function(e){return"measures"===e}))?e.measureFromAxis(s):e.measureFromAxis(r);return(c[n.axisValuesString(r)]||[{row:{}}]).map((function(e){var t=e.row;return[r,o(t,a)]}))})))}}))},i=this.loadResponses.length>1?this.loadResponses.map((function(e,t){return a(t)})):[];return i.length?this.mergePivots(i,t.joinDateRange):a()}},{key:"mergePivots",value:function(e,t){var n=e.reduce((function(e,t){return null!=e&&t.length>=e.length?e:t}),null);return n.map((function(r,a){return{xValues:t?[e.map((function(e){return e[a]&&e[a].xValues||[]})).join(", ")]:n[a].xValues,yValuesArray:Object(xn.a)(e.map((function(e){return e[a].yValuesArray})))}}))}},{key:"pivotedRows",value:function(e){return this.chartPivot(e)}},{key:"chartPivot",value:function(e){var t=this,n=new Set;this.queryType===$n.BLENDING_QUERY&&Object(kn.a)(this.loadResponses.map((function(e){return e.query.measures}))).filter((function(e,t,n){return n.indexOf(e)!==t})).forEach((function(e){return n.add(e)}));return this.pivot(e).map((function(r){var a=r.xValues,i=r.yValuesArray;return Yn({category:t.axisValuesString(a,","),x:t.axisValuesString(a,","),xValues:a},i.map((function(r,a){var i,o=pn()(r,2),s=o[0],c=o[1];return $t()({},t.axisValuesString(function(t,r){return e&&e.aliasSeries&&e.aliasSeries[r]?[e.aliasSeries[r]].concat(ln()(t)):n.has(t[0])?[r].concat(ln()(t)):[t]}(s,a),","),c&&(i=c,t.parseDateMeasures&&Wn.test(i)?new Date(i):Number.isNaN(Number.parseFloat(i))?i:Number.parseFloat(i)))})).reduce((function(e,t){return Object.assign(e,t)}),{}))}))}},{key:"tablePivot",value:function(e){var t=this.normalizePivotConfig(e||{}),n=t.x.concat(t.y).includes("measures");return this.pivot(t).map((function(e){var r=e.xValues,a=e.yValuesArray;return Object(wn.a)(t.x.map((function(e,t){return[e,r[t]]})).concat(n?a.map((function(e){var t=pn()(e,2),n=t[0],r=t[1];return[n.length?n.join():"value",r]})):[]))}))}},{key:"tableColumns",value:function(e){var t=this.normalizePivotConfig(e||{}),n=Object(bn.a)(Object(Sn.a)("annotation"),Object(mn.a)(Object(Cn.a)(),{}))(this.loadResponses),r=Object.values(n).reduce((function(e,t){return Yn(Yn({},e),t)}),{}),a={},i=function(e){var t=r[e]||{};return{key:e,title:t.title,shortTitle:t.shortTitle,type:t.type,format:t.format,meta:t.meta}},o=this.pivot(t);(o[0]&&o[0].yValuesArray||[]).forEach((function(e){var n=pn()(e,1)[0];if(n.length>0){var r=a;n.forEach((function(e,n){r[e]={key:e,memberId:"measures"===t.y[n]?e:t.y[n],children:r[e]&&r[e].children||{}},r=r[e].children}))}}));var s=[];return!o.length&&t.y.includes("measures")&&(s=(this.loadResponses[0].query.measures||[]).map((function(e){return Yn(Yn({},i(e)),{},{dataIndex:e})}))),!t.y.length&&t.x.includes("measures")&&s.push({key:"value",dataIndex:"value",title:"Value",shortTitle:"Value",type:"string"}),t.x.map((function(e){return"measures"===e?{key:"measures",dataIndex:"measures",title:"Measures",shortTitle:"Measures",type:"string"}:Yn(Yn({},i(e)),{},{dataIndex:e})})).concat(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return 0===Object.keys(t).length?[]:Object.values(t).map((function(t){var r=t.key,a=cn()(t,["key"]),o=e(a.children,[].concat(ln()(n),[r])),s=i(a.memberId),c=s.title,u=s.shortTitle,l=cn()(s,["title","shortTitle"]),d=r!==a.memberId||null==c?r:"";return o.length?Yn(Yn({},l),{},{key:r,title:[c,d].join(" ").trim(),shortTitle:d||u,children:o}):Yn(Yn({},l),{},{key:r,dataIndex:[].concat(ln()(n),[r]).join(),title:[c,d].join(" ").trim(),shortTitle:d||u})}))}(a)).concat(s)}},{key:"totalRow",value:function(e){return this.chartPivot(e)[0]}},{key:"categories",value:function(e){return this.chartPivot(e)}},{key:"seriesNames",value:function(t){var n=this;t=this.normalizePivotConfig(t);var r=Object(bn.a)(Object(Sn.a)("annotation"),Object(Sn.a)("measures"),Dn.a)(this.loadResponses),a=Object(xn.a)(this.loadResponses.map((function(e,r){return Object(bn.a)(Object(hn.a)(n.axisValues(t.y,r)),xn.a,On.a)(n.timeDimensionBackwardCompatibleData(r))}))),i=new Set;this.queryType===$n.BLENDING_QUERY&&Object(kn.a)(this.loadResponses.map((function(e){return e.query.measures}))).filter((function(e,t,n){return n.indexOf(e)!==t})).forEach((function(e){return i.add(e)}));return a.map((function(a,o){var s=function(e,n){return t&&t.aliasSeries&&t.aliasSeries[n]?[t.aliasSeries[n]].concat(ln()(e)):i.has(e[0])?[n].concat(ln()(e)):e}(a,o);return{title:n.axisValuesString(t.y.find((function(e){return"measures"===e}))?Object(Tn.a)(1,s).concat(r[e.measureFromAxis(a)].title):s,", "),key:n.axisValuesString(s,","),yValues:a}}))}},{key:"query",value:function(){if(this.queryType!==$n.REGULAR_QUERY)throw new Error("Method is not supported for a '".concat(this.queryType,"' query type. Please use decompose"));return this.loadResponses[0].query}},{key:"pivotQuery",value:function(){return this.loadResponse.pivotQuery||null}},{key:"rawData",value:function(){if(this.queryType!==$n.REGULAR_QUERY)throw new Error("Method is not supported for a '".concat(this.queryType,"' query type. Please use decompose"));return this.loadResponses[0].data}},{key:"annotation",value:function(){if(this.queryType!==$n.REGULAR_QUERY)throw new Error("Method is not supported for a '".concat(this.queryType,"' query type. Please use decompose"));return this.loadResponses[0].annotation}},{key:"timeDimensionBackwardCompatibleData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.backwardCompatibleData[t]){var n=this.loadResponses[t],r=n.data,a=n.query,i=(a.timeDimensions||[]).filter((function(e){return!!e.granularity}));this.backwardCompatibleData[t]=r.map((function(t){return Yn(Yn({},t),Object(wn.a)(Object.keys(t).filter((function(n){return i.find((function(e){return e.dimension===n}))&&!t[e.timeDimensionMember(i.find((function(e){return e.dimension===n})))]})).map((function(n){return[e.timeDimensionMember(i.find((function(e){return e.dimension===n}))),t[n]]}))))}))}return this.backwardCompatibleData[t]}},{key:"decompose",value:function(){var t=this;return this.loadResponses.map((function(n){return new e({queryType:$n.REGULAR_QUERY,pivotQuery:Yn(Yn({},n.query),{},{queryType:$n.REGULAR_QUERY}),results:[n]},t.options)}))}},{key:"serialize",value:function(){return{loadResponse:Object(Rn.a)(this.loadResponse)}}}],[{key:"measureFromAxis",value:function(e){return e[e.length-1]}},{key:"timeDimensionMember",value:function(e){return"".concat(e.dimension,".").concat(e.granularity)}},{key:"deserialize",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new e(t.loadResponse,n)}},{key:"getNormalizedPivotConfig",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={x:[],y:[],fillMissingDates:!0,joinDateRange:!1},a=t.measures,i=void 0===a?[]:a,o=t.dimensions,s=void 0===o?[]:o,c=(t.timeDimensions||[]).filter((function(e){return!!e.granularity}));n=n||(c.length?{x:c.map((function(t){return e.timeDimensionMember(t)})),y:s}:{x:s,y:[]});var u=function(n){return n.map((function(n){return c.find((function(e){return e.dimension===n}))&&!s.find((function(e){return e===n}))?e.timeDimensionMember(t.timeDimensions.find((function(e){return e.dimension===n}))):n}))};(n=Object(Cn.a)(n,r)).x=u(n.x),n.y=u(n.y);var l=n.x.concat(n.y),d=c.map((function(t){return e.timeDimensionMember(t)})).concat(s),p=function(e){return d.includes(e)||"measures"===e};return n.x=n.x.concat(d.filter((function(e){return!l.includes(e)}))).filter(p),n.y=n.y.filter(p),n.x.concat(n.y).find((function(e){return"measures"===e}))||n.y.push("measures"),i.length||(n.x=n.x.filter((function(e){return"measures"!==e})),n.y=n.y.filter((function(e){return"measures"!==e}))),n}}]),e}(),Xn=function(){function e(t){tn()(this,e),this.sqlQuery=t}return rn()(e,[{key:"rawQuery",value:function(){return this.sqlQuery.sql}},{key:"sql",value:function(){return this.rawQuery().sql[0]}}]),e}(),er=function(e){return Object(wn.a)(e.map((function(e){return[e.name,e]})))},tr={string:[{name:"contains",title:"contains"},{name:"notContains",title:"does not contain"},{name:"equals",title:"equals"},{name:"notEquals",title:"does not equal"},{name:"set",title:"is set"},{name:"notSet",title:"is not set"}],number:[{name:"equals",title:"equals"},{name:"notEquals",title:"does not equal"},{name:"set",title:"is set"},{name:"notSet",title:"is not set"},{name:"gt",title:">"},{name:"gte",title:">="},{name:"lt",title:"<"},{name:"lte",title:"<="}]},nr=function(){function e(t){tn()(this,e),this.meta=t;var n=this.meta.cubes;this.cubes=n,this.cubesMap=Object(wn.a)(n.map((function(e){return[e.name,{measures:er(e.measures),dimensions:er(e.dimensions),segments:er(e.segments)}]})))}return rn()(e,[{key:"membersForQuery",value:function(e,t){return Object(xn.a)(this.cubes.map((function(e){return e[t]})))}},{key:"resolveMember",value:function(e,t){var n=this,r=e.split("."),a=pn()(r,1)[0];if(!this.cubesMap[a])return{title:e,error:"Cube not found ".concat(a," for path '").concat(e,"'")};var i=(Array.isArray(t)?t:[t]).map((function(t){return n.cubesMap[a][t]&&n.cubesMap[a][t][e]})).find((function(e){return e}));return i||{title:e,error:"Path not found '".concat(e,"'")}}},{key:"defaultTimeDimensionNameFor",value:function(e){var t=this,n=e.split("."),r=pn()(n,1)[0];return this.cubesMap[r]?Object.keys(this.cubesMap[r].dimensions||{}).find((function(e){return"time"===t.cubesMap[r].dimensions[e].type})):null}},{key:"filterOperatorsForMember",value:function(e,t){var n=this.resolveMember(e,t);return tr[n.type]||tr.string}}]),e}(),rr=function(){function e(t){tn()(this,e),this.progressResponse=t}return rn()(e,[{key:"stage",value:function(){return this.progressResponse.stage}},{key:"timeElapsed",value:function(){return this.progressResponse.timeElapsed}}]),e}();function ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(n),!0).forEach((function(t){$t()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var or=function(){function e(t){var n=t.authorization,r=t.apiUrl,a=t.method,i=t.headers,o=void 0===i?{}:i,s=t.credentials;tn()(this,e),this.authorization=n,this.apiUrl=r,this.method=a,this.headers=o,this.credentials=s}return rn()(e,[{key:"request",value:function(e,t){var n=this,r=t.baseRequestId,a=cn()(t,["baseRequestId"]),i=1,o=new URLSearchParams(a&&Object.keys(a).map((function(e){return $t()({},e,"object"===Xt()(a[e])?JSON.stringify(a[e]):a[e])})).reduce((function(e,t){return ir(ir({},e),t)}),{})),s="".concat(this.apiUrl,"/").concat(e).concat(o.toString().length?"?".concat(o):"");this.method=this.method||(s.length<2e3?"GET":"POST"),"POST"===this.method&&(s="".concat(this.apiUrl,"/").concat(e),this.headers["Content-Type"]="application/json");return{subscribe:function(e){var t=this;return Wt()(on.a.mark((function o(){var c;return on.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Ln()(s,{method:n.method,headers:ir({Authorization:n.authorization,"x-request-id":r&&"".concat(r,"-span-").concat(i++)},n.headers),credentials:n.credentials,body:"POST"===n.method?JSON.stringify(a):null});case 2:return c=o.sent,o.abrupt("return",e(c,(function(){return t.subscribe(e)})));case 4:case"end":return o.stop()}}),o)})))()}}}}]),e}();function sr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nn()(e);if(t){var a=Nn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _n()(this,n)}}var cr=function(e){Fn()(n,e);var t=sr(n);function n(e,r){var a;return tn()(this,n),(a=t.call(this,e)).response=r,a}return n}(Bn()(Error));function ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(n),!0).forEach((function(t){$t()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(vn.a)(Object.entries(e&&e.order||{}),Object.entries(t&&t.order||{}))&&Object(vn.a)(e,t)}function pr(e){return!!e&&(Array.isArray(e)?e:[e]).every((function(e){return e.measures&&e.measures.length||e.dimensions&&e.dimensions.length||e.timeDimensions&&e.timeDimensions.length}))}function br(e,t,n,r,a){var i=lr(lr({},e),{},{x:ln()(e.x),y:ln()(e.y)}),o=e[r][t],s=i[a].length-1;return"measures"===o?n=s+1:n>=s&&"measures"===i[a][s]&&(n=s-1),i[r].splice(t,1),i[a].splice(n,0,o),i}function hr(e,t,n){var r=ln()(e),a=r.splice(t,1),i=pn()(a,1)[0];return r.splice(n,0,i),r}function fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){return t.or||t.and?[].concat(ln()(e),ln()(fr(t.or||t.and))):[].concat(ln()(e),[t])}),[])}function mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(n),!0).forEach((function(t){$t()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yr=0,vr="Mutex has been changed",gr=function(){function e(t,n){if(tn()(this,e),"object"===Xt()(t)&&(n=t,t=void 0),!(n=n||{}).transport&&!n.apiUrl)throw new Error("The `apiUrl` option is required");this.apiToken=t,this.apiUrl=n.apiUrl,this.method=n.method,this.headers=n.headers||{},this.credentials=n.credentials,this.transport=n.transport||new or({authorization:"function"==typeof t?void 0:t,apiUrl:this.apiUrl,method:this.method,headers:this.headers,credentials:this.credentials}),this.pollInterval=n.pollInterval||5,this.parseDateMeasures=n.parseDateMeasures}var t;return rn()(e,[{key:"request",value:function(e,t){return this.transport.request(e,jr({baseRequestId:ke()()},t))}},{key:"loadMethod",value:function(e,t,n,r){var a=this,i=++yr;"function"!=typeof n||r||(r=n,n=void 0);var o=(n=n||{}).mutexKey||"default";n.mutexObj&&(n.mutexObj[o]=i);var s,c=this.updateTransportAuthorization().then((function(){return e()})),u=!1,l=function(){var e=Wt()(on.a.mark((function e(){var t;return on.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c;case 2:if(t=e.sent,!n.mutexObj||n.mutexObj[o]===i){e.next=9;break}if(u=!0,!t.unsubscribe){e.next=8;break}return e.next=8,t.unsubscribe();case 8:throw vr;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Wt()(on.a.mark((function e(i,o){var s,d,p,b,h,f;return on.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c;case 2:return s=e.sent,d=function(){var e=Wt()(on.a.mark((function e(){return on.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.subscribe||u){e.next=8;break}if(!s.unsubscribe){e.next=5;break}return e.abrupt("return",o());case 5:return e.next=7,new Promise((function(e){return setTimeout((function(){return e()}),1e3*a.pollInterval)}));case 7:return e.abrupt("return",o());case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Wt()(on.a.mark((function e(t){return on.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=5;break}if(!t){e.next=4;break}return e.next=4,new Promise((function(e){return setTimeout((function(){return e()}),1e3*a.pollInterval)}));case 4:return e.abrupt("return",o());case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=7,a.updateTransportAuthorization();case 7:if(502!==i.status){e.next=11;break}return e.next=10,l();case 10:return e.abrupt("return",p(!0));case 11:if(!(i.status<200||i.status>299)){e.next=13;break}throw new Error("Request error. Response status: ".concat(i.status));case 13:return e.next=15,i.json();case 15:if("Continue wait"!==(b=e.sent).error){e.next=21;break}return e.next=19,l();case 19:return n.progressCallback&&n.progressCallback(new rr(b)),e.abrupt("return",p());case 21:if(200===i.status){e.next=34;break}return e.next=24,l();case 24:if(n.subscribe||!s.unsubscribe){e.next=27;break}return e.next=27,s.unsubscribe();case 27:if(h=new cr(b.error,b),!r){e.next=32;break}r(h),e.next=33;break;case 32:throw h;case 33:return e.abrupt("return",d());case 34:return e.next=36,l();case 36:if(n.subscribe||!s.unsubscribe){e.next=39;break}return e.next=39,s.unsubscribe();case 39:if(f=t(b),!r){e.next=44;break}r(null,f),e.next=45;break;case 44:return e.abrupt("return",f);case 45:return e.abrupt("return",d());case 46:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=c.then((function(e){return function(e){return new Promise((function(t,n){e.then((function(e){return t(e)}),(function(e){return e!==vr&&n(e)}))}))}(e.subscribe(d))}));return r?{unsubscribe:(s=Wt()(on.a.mark((function e(){var t;return on.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c;case 2:if(t=e.sent,u=!0,!t.unsubscribe){e.next=6;break}return e.abrupt("return",t.unsubscribe());case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)})}:p}},{key:"updateTransportAuthorization",value:(t=Wt()(on.a.mark((function e(){var t;return on.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof this.apiToken){e.next=5;break}return e.next=3,this.apiToken();case 3:t=e.sent,this.transport.authorization!==t&&(this.transport.authorization=t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"load",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("load",{query:e,queryType:"multi"})}),(function(e){return new Zn(e,{parseDateMeasures:r.parseDateMeasures})}),t,n)}},{key:"sql",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("sql",{query:e})}),(function(e){return Array.isArray(e)?e.map((function(e){return new Xn(e)})):new Xn(e)}),t,n)}},{key:"meta",value:function(e,t){var n=this;return this.loadMethod((function(){return n.request("meta")}),(function(e){return new nr(e)}),e,t)}},{key:"dryRun",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("dry-run",{query:e})}),(function(e){return e}),t,n)}},{key:"subscribe",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("subscribe",{query:e,queryType:"multi"})}),(function(e){return new Zn(e,{parseDateMeasures:r.parseDateMeasures})}),jr(jr({},t),{},{subscribe:!0}),n)}}]),e}(),xr=function(e,t){return new gr(e,t)},Or=n(814),kr=n(481),wr=n(815),Sr=(n(55),n(348)),Cr=n.n(Sr),Dr=Object(v.createContext)(null);function Tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(n),!0).forEach((function(t){$t()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nn()(e);if(t){var a=Nn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _n()(this,n)}}var Pr=function(e){Fn()(n,e);var t=Mr(n);function n(e){var r;return tn()(this,n),(r=t.call(this,e)).state={},r.mutexObj={},r}return rn()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.query,n=e.queries;t&&this.load(t),n&&this.loadQueries(n)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,r=n.query,a=n.queries,i=n.render,o=n.cubejsApi,s=n.loadSql,c=n.updateOnlyOnStateChange;return!c||(!Object(vn.a)(e.query,r)||!Object(vn.a)(e.queries,a)||(null==e.render||null==i)&&e.render!==i||e.cubejsApi!==o||e.loadSql!==s||!Object(vn.a)(t,this.state)||e.updateOnlyOnStateChange!==c)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.query,r=t.queries;Object(vn.a)(e.query,n)||this.load(n),Object(vn.a)(e.queries,r)||this.loadQueries(r)}},{key:"cubejsApi",value:function(){return this.props.cubejsApi||this.context&&this.context.cubejsApi}},{key:"load",value:function(e){var t=this,r=this.props.resetResultSetOnChange;this.setState(Rr({isLoading:!0,error:null,sqlQuery:null},r?{resultSet:null}:{}));var a=this.props.loadSql,i=this.cubejsApi();e&&n.isQueryPresent(e)&&("only"===a?i.sql(e,{mutexObj:this.mutexObj,mutexKey:"sql"}).then((function(e){return t.setState({sqlQuery:e,error:null,isLoading:!1})})).catch((function(e){return t.setState(Rr(Rr({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))})):a?Promise.all([i.sql(e,{mutexObj:this.mutexObj,mutexKey:"sql"}),i.load(e,{mutexObj:this.mutexObj,mutexKey:"query"})]).then((function(e){var n=pn()(e,2),r=n[0],a=n[1];return t.setState({sqlQuery:r,resultSet:a,error:null,isLoading:!1})})).catch((function(e){return t.setState(Rr(Rr({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))})):i.load(e,{mutexObj:this.mutexObj,mutexKey:"query"}).then((function(e){return t.setState({resultSet:e,error:null,isLoading:!1})})).catch((function(e){return t.setState(Rr(Rr({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))})))}},{key:"loadQueries",value:function(e){var t=this,n=this.cubejsApi(),r=this.props.resetResultSetOnChange;this.setState(Rr(Rr({isLoading:!0},r?{resultSet:null}:{}),{},{error:null})),Promise.all(Object(Or.a)(e).map((function(e){var r=pn()(e,2),a=r[0],i=r[1];return n.load(i,{mutexObj:t.mutexObj,mutexKey:a}).then((function(e){return[a,e]}))}))).then((function(e){return t.setState({resultSet:Object(wn.a)(e),error:null,isLoading:!1})})).catch((function(e){return t.setState(Rr(Rr({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))}))}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.queries,r=e.resultSet,a=e.isLoading,i=e.sqlQuery,o=this.props.render;return o?o({error:t,resultSet:n?r||{}:r,loadingState:{isLoading:a},sqlQuery:i}):null}}],[{key:"isQueryPresent",value:function(e){return pr(e)}}]),n}(g.a.Component);Pr.contextType=Dr,Pr.defaultProps={cubejsApi:null,query:null,render:null,queries:null,loadSql:null,updateOnlyOnStateChange:!1,resetResultSetOnChange:!0};function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){$t()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ar(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nn()(e);if(t){var a=Nn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _n()(this,n)}}var Lr=[{name:void 0,title:"w/o grouping"},{name:"second",title:"Second"},{name:"minute",title:"Minute"},{name:"hour",title:"Hour"},{name:"day",title:"Day"},{name:"week",title:"Week"},{name:"month",title:"Month"},{name:"year",title:"Year"}],zr=function(e){Fn()(i,e);var t,n,r,a=Ar(i);function i(e){var t;return tn()(this,i),t=a.call(this,e),$t()(Cr()(t),"fetchMeta",Wt()(on.a.mark((function e(){var n,r;return on.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,t.setState({isFetchingMeta:!0}),e.next=5,t.cubejsApi().meta();case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r=e.t0;case 11:t.setState({meta:n,metaError:r,isFetchingMeta:!1},(function(){t.updateQuery({})}));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))),t.state=qr(qr({query:e.defaultQuery||e.query,chartType:e.defaultChartType,validatedQuery:e.query,missingMembers:[],isFetchingMeta:!1,dryRunResponse:null},e.vizState),e.initialVizState),t.mutexObj={},t}return rn()(i,[{key:"componentDidMount",value:(r=Wt()(on.a.mark((function e(){return on.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchMeta();case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(n=Wt()(on.a.mark((function e(t){var n,r,a,i,o,s=this;return on.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.schemaVersion,a=n.onSchemaChange,i=this.state.meta,t.schemaVersion===r){e.next=13;break}return e.prev=3,e.next=6,this.cubejsApi().meta();case 6:o=e.sent,Object(vn.a)(o,i)||"function"!=typeof a||a({schemaVersion:r,refresh:function(){var e=Wt()(on.a.mark((function e(){return on.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.fetchMeta();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.setState({metaError:e.t0});case 13:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(e){return n.apply(this,arguments)})},{key:"cubejsApi",value:function(){var e=this.props.cubejsApi;return e||this.context&&this.context.cubejsApi}},{key:"getMissingMembers",value:function(e,t){return t?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=["measures","dimensions","segments"],n=new Set;return t.forEach((function(t){return(e[t]||[]).forEach((function(e){return n.add(e)}))})),(e.timeDimensions||[]).forEach((function(e){return n.add(e.dimension)})),fr(e.filters).forEach((function(e){return n.add(e.dimension||e.member)})),ln()(n)}(e).map((function(e){return!!t.resolveMember(e,["measures","dimensions","segments"]).error&&e})).filter(Boolean):[]}},{key:"isQueryPresent",value:function(){var e=this.state.query;return Pr.isQueryPresent(e)}},{key:"prepareRenderProps",value:function(e){var t=this,n=function(e){return e.name},r=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return{add:function(n){var a=t.state.query;t.updateQuery($t()({},e,(a[e]||[]).concat(r(n))))},remove:function(n){var r=(t.state.query[e]||[]).concat([]);return r.splice(n.index,1),t.updateQuery($t()({},e,r))},update:function(n,a){var i=(t.state.query[e]||[]).concat([]);return i.splice(n.index,1,r(a)),t.updateQuery($t()({},e,i))}}},a=this.state,o=a.meta,s=a.metaError,c=a.query,u=a.queryError,l=a.chartType,d=a.pivotConfig,p=a.validatedQuery,b=a.missingMembers,h=a.isFetchingMeta,f=a.dryRunResponse,m=Object(kr.a)(Object(Mn.a)("member"),fr(o&&c.filters||[]).map((function(e){return qr(qr({},e),{},{member:e.member||e.dimension})}))).map((function(e,t){return qr(qr({},e),{},{dimension:o.resolveMember(e.member||e.dimension,["dimensions","measures"]),operators:o.filterOperatorsForMember(e.member||e.dimension,["dimensions","measures"]),index:t})})),j=i.resolveMember("measures",this.state),y=i.resolveMember("dimensions",this.state),v=i.resolveMember("timeDimensions",this.state),g=(o&&c.segments||[]).map((function(e,t){return qr({index:t},o.resolveMember(e,"segments"))})),x=o?o.membersForQuery(c,"measures"):[],O=o?o.membersForQuery(c,"dimensions"):[],k=o?o.membersForQuery(c,"segments"):[],w=Object(kr.a)(Object(Mn.a)("id"),[].concat(ln()((Array.isArray(c.order)?c.order:Object.entries(c.order||{})).map((function(e){var t=pn()(e,2),n=t[0];return{id:n,order:t[1],title:o?o.resolveMember(n,["measures","dimensions"]).title:""}}))),ln()([].concat(ln()(j),ln()(y)).map((function(e){return{id:e.name,title:e.title,order:"none"}}))))),S=JSON.stringify(w.map((function(e){return e.id})).sort());return this.orderMemberOrderKey&&this.orderMemberOrder&&S===this.orderMemberOrderKey?w=this.orderMemberOrder.map((function(e){return w.find((function(t){return t.id===e}))})):(this.orderMemberOrderKey=S,this.orderMemberOrder=w.map((function(e){return e.id}))),qr({meta:o,metaError:s,query:c,error:u,validatedQuery:p,isQueryPresent:this.isQueryPresent(),chartType:l,measures:j,dimensions:y,timeDimensions:v,segments:g,filters:m,orderMembers:w,availableMeasures:x,availableDimensions:O,availableTimeDimensions:O.filter((function(e){return"time"===e.type})),availableSegments:k,updateQuery:function(e){return t.updateQuery(e)},updateMeasures:r("measures"),updateDimensions:r("dimensions"),updateSegments:r("segments"),updateTimeDimensions:r("timeDimensions",(function(e){var t=e.compareDateRange?{compareDateRange:e.compareDateRange}:{dateRange:e.dateRange};return qr({dimension:e.dimension.name,granularity:e.granularity},t)})),updateFilters:r("filters",(function(e){var t,n;return{member:(null===(t=e.member)||void 0===t?void 0:t.name)||(null===(n=e.dimension)||void 0===n?void 0:n.name),operator:e.operator,values:e.values}})),updateChartType:function(e){return t.updateVizState({chartType:e})},updateOrder:{set:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";t.updateQuery({order:w.map((function(t){return qr(qr({},t),{},{order:t.id===e?n:t.order})})).reduce((function(e,t){var n=t.id,r=t.order;return"none"!==r?[].concat(ln()(e),[[n,r]]):e}),[])})},update:function(e){t.updateQuery({order:e})},reorder:function(e,n){null!=e&&null!=n&&t.updateQuery({order:hr(w,e,n).reduce((function(e,t){var n=t.id,r=t.order;return"none"!==r?[].concat(ln()(e),[[n,r]]):e}),[])})}},pivotConfig:d,updatePivotConfig:{moveItem:function(e){var n=e.sourceIndex,r=e.destinationIndex,a=e.sourceAxis,i=e.destinationAxis;t.updateVizState({pivotConfig:br(d,n,r,a,i)})},update:function(e){var n=e.limit;t.updateVizState(qr({pivotConfig:qr(qr({},d),e)},n?{query:qr(qr({},c),{},{limit:n})}:null))}},missingMembers:b,refresh:this.fetchMeta,isFetchingMeta:h,dryRunResponse:f},e)}},{key:"updateQuery",value:function(e){var t=this.state.query;this.updateVizState({query:qr(qr({},t),e)})}},{key:"updateVizState",value:(t=Wt()(on.a.mark((function e(t){var n,r,a,i,o,s,c,u,l,d,p,b,h,f=this;return on.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.setQuery,a=n.setVizState,i=this.state,o=i.query,s=i.pivotConfig,c=i.chartType,u=i.meta,(l=this.applyStateChangeHeuristics(t)).query||(l.query=qr({},o)),d=null,p=function(e){var t=f.props.onVizStateChanged;if(t){var n=Object(wr.a)(["chartType","pivotConfig","query"],e);d&&Object(vn.a)(d,n)||(t(n),d=Object(Rn.a)(n))}},b=function(e){a&&a(Object(wr.a)(["chartType","pivotConfig","query"],e)),e.query&&r&&r(e.query)},l.shouldApplyHeuristicOrder&&(l.query.order=(m=l.query,j=void 0,(j=(m.timeDimensions||[]).find((function(e){return e.granularity})))?$t()({},j.dimension,"asc"):(m.measures||[]).length>0&&(m.dimensions||[]).length>0?$t()({},m.measures[0],"desc"):(m.dimensions||[]).length>0?$t()({},m.dimensions[0],"asc"):{})),l.pivotConfig=Zn.getNormalizedPivotConfig(l.query,void 0!==l.pivotConfig?l.pivotConfig:s),l.missingMembers=this.getMissingMembers(l.query,u),l.chartType=l.chartType||t.chartType||c,b(qr(qr({},t),{},{query:l.query})),this.setState(qr(qr({},l),{},{queryError:null})),p(l),!Pr.isQueryPresent(l.query)||0!==l.missingMembers.length){e.next=30;break}return e.prev=15,e.next=18,this.cubejsApi().dryRun(l.query,{mutexObj:this.mutexObj});case 18:h=e.sent,l.shouldApplyHeuristicOrder&&(l.query.order=(h.queryOrder||[]).reduce((function(e,t){return qr(qr({},e),t)}),{})),l.pivotConfig=Zn.getNormalizedPivotConfig(h.pivotQuery,l.pivotConfig),l.validatedQuery=this.validatedQuery(l),l.dryRunResponse=h,Pr.isQueryPresent(o)&&b(qr(qr({},this.state),l)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(15),console.error(e.t0),this.setState({queryError:e.t0});case 30:this.setState(l,(function(){return p(f.state)}));case 31:case"end":return e.stop()}var m,j}),e,this,[[15,26]])}))),function(e){return t.apply(this,arguments)})},{key:"validatedQuery",value:function(e){var t=(e||this.state).query;return qr(qr({},t),{},{filters:(t.filters||[]).filter((function(e){return e.operator}))})}},{key:"defaultHeuristics",value:function(e){var t=this.state,n=t.query,r=t.sessionGranularity;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=Object(Rn.a)(e),a=r.query,i=cn()(r,["query"]),o=n.meta,s=n.sessionGranularity||"day",c=lr({query:a},i),u=null;if(dr(a,t)||(u=a),Array.isArray(u)||Array.isArray(t))return e;if(u){if(1===(t.timeDimensions||[]).length&&1===(u.timeDimensions||[]).length&&u.timeDimensions[0].granularity&&t.timeDimensions[0].granularity!==u.timeDimensions[0].granularity&&(c=lr(lr({},c),{},{sessionGranularity:u.timeDimensions[0].granularity})),0===(t.measures||[]).length&&(u.measures||[]).length>0||1===(t.measures||[]).length&&1===(u.measures||[]).length&&t.measures[0]!==u.measures[0]){var l=u.timeDimensions||[],d=pn()(l,1)[0],p=o.defaultTimeDimensionNameFor(u.measures[0]);return u=lr(lr({},u),{},{timeDimensions:p?[{dimension:p,granularity:d&&d.granularity||s,dateRange:d&&d.dateRange}]:[]}),lr(lr({},c),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:u,chartType:p?"line":"number"})}return 0===(t.dimensions||[]).length&&(u.dimensions||[]).length>0?(u=lr(lr({},u),{},{timeDimensions:(u.timeDimensions||[]).map((function(e){return lr(lr({},e),{},{granularity:void 0})}))}),lr(lr({},c),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:u,chartType:"table"})):(t.dimensions||[]).length>0&&0===(u.dimensions||[]).length?(u=lr(lr({},u),{},{timeDimensions:(u.timeDimensions||[]).map((function(e){return lr(lr({},e),{},{granularity:e.granularity||s})}))}),lr(lr({},c),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:u,chartType:(u.timeDimensions||[]).length?"line":"number"})):((t.dimensions||[]).length>0||(t.measures||[]).length>0)&&0===(u.dimensions||[]).length&&0===(u.measures||[]).length?(u=lr(lr({},u),{},{timeDimensions:[],filters:[]}),lr(lr({},c),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:u,sessionGranularity:null})):c}if(c.chartType){var b=c.chartType;if(("line"===b||"area"===b)&&1===(t.timeDimensions||[]).length&&!t.timeDimensions[0].granularity){var h=pn()(t.timeDimensions,1)[0];return lr(lr({},c),{},{pivotConfig:null,query:lr(lr({},t),{},{timeDimensions:[lr(lr({},h),{},{granularity:s})]})})}if(("pie"===b||"table"===b||"number"===b)&&1===(t.timeDimensions||[]).length&&t.timeDimensions[0].granularity){var f=pn()(t.timeDimensions,1)[0];return lr(lr({},c),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:lr(lr({},t),{},{timeDimensions:[lr(lr({},f),{},{granularity:void 0})]})})}}return c}(e,n,{meta:t.meta,sessionGranularity:r||"day"})}},{key:"applyStateChangeHeuristics",value:function(e){var t=this.props,n=t.stateChangeHeuristics;return t.disableHeuristics?e:n&&n(this.state,e)||this.defaultHeuristics(e)}},{key:"render",value:function(){var e=this,t=this.state.query,n=this.props,r=n.cubejsApi,a=n.render;return n.wrapWithQueryRenderer?g.a.createElement(Pr,{query:t,cubejsApi:r,resetResultSetOnChange:!1,render:function(t){return a?a(e.prepareRenderProps(t)):null}}):a?a(this.prepareRenderProps()):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.query||e.vizState){var n=qr(qr({},t),e.vizState||{});if(Array.isArray(e.query))throw new Error("Array of queries is not supported.");return qr(qr({},n),{},{query:qr(qr({},n.query),e.query||{})})}return null}},{key:"resolveMember",value:function(e,t){var n=t.meta,r=t.query;return n?Array.isArray(r)?r.reduce((function(t,r){return t.concat(i.resolveMember(e,{meta:n,query:r}))}),[]):"timeDimensions"===e?(r.timeDimensions||[]).map((function(e,t){return qr(qr({},e),{},{dimension:qr(qr({},n.resolveMember(e.dimension,"dimensions")),{},{granularities:Lr}),index:t})})):(r[e]||[]).map((function(t,r){return qr({index:r},n.resolveMember(t,e))})):[]}}]),i}(g.a.Component);zr.contextType=Dr,zr.defaultProps={cubejsApi:null,stateChangeHeuristics:null,disableHeuristics:!1,render:null,wrapWithQueryRenderer:!0,defaultChartType:"line",defaultQuery:{},initialVizState:null,onVizStateChanged:null,query:null,setQuery:null,vizState:null,setVizState:null};var Fr=function(e){var t=e.cubejsApi,n=e.children;return g.a.createElement(Dr.Provider,{value:{cubejsApi:t}},n)};var Qr=n(464),_r=n.n(Qr);var Ur,Nr=n(465),Ir=n(358),Br=n(826),Vr=n(485),Yr=n(203),Jr=Ir.a.TabPane,Kr=bt.a.TextArea,Hr=ae.a.Text,Wr=ae.a.Link,Gr=P.b.div(Ur||(Ur=Object(w.a)(["\n  display: flex;\n  gap: 8px;\n\n  input {\n    text-overflow: ",";\n  }\n"])),(function(e){return e.editing?"unset":"ellipsis"}));function $r(){var e=ea(),t=e.payload,n=e.token,r=e.isModalOpen,a=e.setIsModalOpen,i=e.saveToken,o=e.getToken,s=pt.a.useForm(),u=Object(_.a)(s,1)[0],d=Object(v.useState)(!1),p=Object(_.a)(d,2),b=p[0],h=p[1],f=Object(v.useState)(!0),m=Object(_.a)(f,2),j=m[0],y=m[1],g=Object(v.useState)(t||""),x=Object(_.a)(g,2),O=x[0],k=x[1],w=Object(v.useRef)(null);function S(){return(S=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=16;break}if("function"==typeof o){e.next=3;break}throw new Error("Saving token requires the `getToken` function provided to the `SecurityContext`");case 3:return e.prev=3,e.t0=i,e.next=7,o(O||"");case 7:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 11:e.prev=11,e.t2=e.catch(3),console.error(e.t2);case 14:e.next=17;break;case 16:O||i(null);case 17:a(!1);case 18:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}return Object(v.useEffect)((function(){var e;b&&(null===(e=w.current)||void 0===e||e.focus())}),[b]),Object(v.useEffect)((function(){h(!n),k(t),u.setFieldsValue({token:n})}),[u,n,t]),Object(q.jsx)(Br.a,{title:"Security Context",visible:r,footer:null,bodyStyle:{paddingTop:16},onCancel:function(){a(!1),h(!1)},children:Object(q.jsx)("div",{"data-testid":"security-context-modal",children:Object(q.jsxs)(ie.b,{direction:"vertical",size:24,style:{width:"100%"},children:[Object(q.jsxs)(Ir.a,{defaultActiveKey:"json",style:{minHeight:200},onChange:function(e){"token"!==e&&b&&n&&(h(!1),u.resetFields())},children:[Object(q.jsx)(Jr,{tab:"JSON",children:Object(q.jsxs)(ie.b,{direction:"vertical",size:16,style:{width:"100%"},children:[Object(q.jsx)(Kr,{"data-testid":"security-context-textarea",value:O||"",rows:6,style:{width:"100%"},onChange:function(e){var t=e.target.value;k(t);try{JSON.parse(t),y(!0)}catch(e){y(!1)}}}),Object(q.jsx)(pe.a,{"data-testid":"save-security-context-payload-btn",type:"primary",disabled:Boolean(O&&!j),onClick:function(){return S.apply(this,arguments)},children:"Save"})]})},"json"),Object(q.jsx)(Jr,{"data-testid":"security-modal-token-tab",tab:"Token",children:Object(q.jsxs)(ie.b,{direction:"vertical",size:16,style:{width:"100%"},children:[Object(q.jsx)(Hr,{type:"secondary",children:"Edit or copy the generated token from below"}),Object(q.jsx)(pt.a,{form:u,initialValues:{token:n},onFinish:function(e){i((null==e?void 0:e.token)||null),h(!1),a(!1)},children:Object(q.jsxs)(Gr,{editing:b,children:[Object(q.jsx)(pt.a.Item,{name:"token",style:{width:"auto",flexGrow:1},children:Object(q.jsx)(bt.a,{"data-testid":"security-context-token-input",ref:w,disabled:!b})}),b?Object(q.jsx)(pe.a,{type:"primary",icon:Object(q.jsx)(Yr.a,{}),htmlType:"submit"}):Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(pe.a,{ghost:!0,type:"primary",icon:Object(q.jsx)(Vr.a,{}),onClick:function(){h(!0)}}),Object(q.jsx)(pe.a,{type:"primary",icon:Object(q.jsx)(St.a,{}),disabled:!n,onClick:function(){return nt(n)},children:"Copy"})]})]})})]})},"token")]}),Object(q.jsxs)(Hr,{type:"secondary",children:["Learn more about Security Context in"," ",Object(q.jsx)(Wr,{href:"https://cube.dev/docs/security/context",target:"_blank",children:"docs"})]})]})})})}var Zr=Object(v.createContext)({});function Xr(e){var t=e.children,n=e.getToken,r=e.tokenKey,a=void 0===r?null:r,i=Object(v.useState)(null),o=Object(_.a)(i,2),s=o[0],c=o[1],u=Object(v.useState)(""),l=Object(_.a)(u,2),d=l[0],p=l[1],b=Object(v.useState)(!1),h=Object(_.a)(b,2),f=h[0],m=h[1],j=a?"cubejsToken:".concat(a):"cubejsToken";Object(v.useEffect)((function(){var e=localStorage.getItem(j);e&&c(e)}),[j]),Object(v.useEffect)((function(){if(s)try{var e=Object(Nr.a)(s);p(JSON.stringify(e,null,2))}catch(e){p(""),console.error("Invalid JWT token")}}),[s]);var y=Object(v.useCallback)((function(e){e?localStorage.setItem(j,e):(localStorage.removeItem(j),p("")),c(e||null)}),[j]);return Object(q.jsxs)(Zr.Provider,{value:{payload:d,token:s,isValid:!1,isModalOpen:f,setIsModalOpen:m,saveToken:y,getToken:n},children:[t,Object(q.jsx)($r,{})]})}function ea(){return Object(v.useContext)(Zr)}var ta=n(466),na=Object(v.createContext)(null);function ra(e){var t=e.disabled,n=void 0!==t&&t,r=e.onChange,a=e.children,i=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){Object(ta.a)(e)},n=Object(v.useRef)(!1),r=Object(v.useState)({loading:!0,active:!1,deploymentUrl:null}),a=Object(_.a)(r,2),i=a[0],o=a[1];Object(v.useEffect)((function(){if(!e){var t=setInterval((function(){d()}),5e3);return d(),function(){clearInterval(t)}}}),[]),Object(v.useEffect)((function(){i.loading||n.current===i.active||b(),n.current=i.active}),[n,i.active,i.loading]);var s,d=function(){return fetch("/playground/live-preview/status").then((function(e){return e.json()})).then((function(e){o(Object(u.a)({loading:!1},e))}))},p=function(){var e=Object(l.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/playground/live-preview/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(l.a)(c.a.mark((function e(){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null==i?void 0:i.active)){e.next=8;break}return e.next=3,p({});case 3:n=e.sent,r=n.token,t({token:null==r?void 0:r.token,apiUrl:null==i?void 0:i.deploymentUrl}),e.next=9;break;case 8:t({});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{statusLivePreview:i,createTokenWithPayload:p,stopLivePreview:(s=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/playground/live-preview/stop");case 2:return e.next=4,d();case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)}),startLivePreview:function(){return new Promise((function(e,t){var n=encodeURIComponent(window.location.origin),r="http://localhost:4000"!==window.location.origin&&new URLSearchParams({callbackUrl:n}).toString(),a=window.open("https://cubecloud.dev/auth/live-preview".concat(r?"?".concat(r):""),"","width=640,height=720");if(!a)return console.error("The popup was blocked by the browser"),void t();var i=setInterval((function(){a.closed&&(clearInterval(i),e(!0),d())}),1e3)}))}}}(n,r);return Object(q.jsx)(na.Provider,{value:Object(u.a)(Object(u.a)({},i),{},{livePreviewDisabled:n}),children:a})}function aa(){return Object(v.useContext)(na)}var ia,oa,sa=n(816),ca=n(855),ua=n(856),la=n(484),da=function(e){var t=e.overlay,n=e.disabled,r=void 0!==n&&n,a=Object(ht.a)(e,["overlay","disabled"]);return Object(q.jsx)(M.a,{disabled:r,overlay:t,placement:"bottomLeft",trigger:["click"],children:Object(q.jsx)(be,Object(u.a)(Object(u.a)({},a),{},{disabled:r}))})},pa=Object(P.b)(R.a)(ia||(ia=Object(w.a)(["\n  max-height: 320px;\n  overflow: hidden auto;\n"]))),ba=function(e,t){return Object(q.jsx)(pa,{children:t.length?t.map((function(t){return Object(q.jsx)(pa.Item,{onClick:function(){return e(t)},children:t.title},t.name)})):Object(q.jsx)(pa.Item,{disabled:!0,children:"No members found"})})},ha=function(e){var t=e.onClick,n=e.availableMembers,r=Object(ht.a)(e,["onClick","availableMembers"]);return Object(q.jsx)(da,Object(u.a)({overlay:ba(t,n)},r))},fa=n(75);function ma(e){return null==e.color?"primary":{primary:"primary",danger:"pink"}[e.color]}var ja,ya,va,ga,xa,Oa,ka=Object(P.b)((function(e){var t=e.onRemoveClick,n=e.children,r=Object(ht.a)(e,["onRemoveClick","children"]);return Object(q.jsxs)(be.Group,Object(u.a)(Object(u.a)({},r),{},{children:[n,Object(q.jsx)(be,{ghost:!0,className:"remove-btn",disabled:r.disabled,onClick:t,children:Object(q.jsx)(fa.a,{})})]}))}))(oa||(oa=Object(w.a)(["\n  && {\n    border-radius: calc(var(--border-radius-base) + 1px);\n    \n    .ant-btn {\n      border: none;\n\n      & + .ant-btn {\n        margin-left: 0;\n      }\n    }\n\n    .remove-btn {\n      padding: 8px;\n\n      .anticon {\n        height: 14px;\n        display: block;\n      }\n    }\n  }\n\n  &&:not(.disabled) {\n    border: 1px solid var(--","-color);\n    color: var(--","-color);\n\n    .ant-btn {\n      background-color: var(--","-9);\n      color: var(--","-color);\n\n      span {\n        color: var(--","-color);\n      }\n\n      &:hover {\n        background-color: var(--","-8);\n        border: none;\n        box-shadow: none;\n      }\n    }\n\n    .remove-btn {\n      background-color: white !important;\n      color: var(--","-color);\n\n      &:hover {\n        background-color: var(--","-8) !important;\n      }\n    }\n  }\n\n  &&.disabled {\n    border: 1px solid var(--disabled-color);\n    color: var(--disabled-color);\n\n    .ant-btn {\n      background-color: var(--disabled-bg);\n      color: var(--disabled-color);\n      border: none;\n\n      span {\n        color: var(--disabled-color);\n      }\n    }\n\n    .remove-btn {\n      color: var(--disabled-color);\n    }\n  }\n"])),ma,ma,ma,ma,ma,ma,ma,ma),wa=P.b.div(ja||(ja=Object(w.a)(["\n  font-weight: 500;\n  font-size: 12px;\n  line-height: 18px;\n  letter-spacing: 0.04em;\n  text-transform: uppercase;\n  color: var(--dark-04-color);\n  margin-bottom: 8px;\n"]))),Sa=P.b.div(ya||(ya=Object(w.a)(["\n  display: flex;\n  flex-flow: row wrap; \n  margin-right: -8px;\n  margin-bottom: -8px;\n  \n  && > * {\n    margin-right: 8px !important;\n    margin-bottom: 8px !important;\n  }\n"]))),Ca=n(232),Da=Object(P.b)(Ca.a)(va||(va=Object(w.a)(["\n  &&& {\n    &.ant-select-disabled {\n      .ant-select-selector {\n        border-color: var(--disabled-color);\n        background-color: white;\n      }\n\n      .ant-select-selector {\n        color: var(--disabled-color);\n        \n        &:hover,\n        &:active,\n        &:focus {\n          border-color: var(--disabled-color);\n          color: var(--disabled-color);\n        }\n      }\n    }\n\n    &.ant-select-single {\n      .ant-select-selector {\n        padding: 5px 12px;\n\n        .ant-select-selection-placeholder {\n          line-height: 22px;\n        }\n      }\n    }\n\n    &.ant-select-multiple {\n      .ant-select-selector {\n        padding: 3px 12px;\n      }\n\n      .ant-select-selection-item {\n        margin-top: 0;\n        margin-bottom: 0;\n      }\n    }\n\n    .ant-select-selection-item {\n      font-size: 14px;\n      line-height: 22px;\n    }\n\n    .ant-select-selector {\n      height: auto;\n      color: var(--text-color);\n      font-size: 14px;\n      line-height: 22px;\n\n      &:hover,\n      &:active,\n      &:focus {\n        border-color: var(--purple-04-color);\n        color: var(--primary-color);\n      }\n    }\n\n    .ant-select-selector::after {\n      font-size: 14px;\n      line-height: 22px;\n    }\n  }\n"]))),Ta=(Object(P.b)(bt.a)(ga||(ga=Object(w.a)(["\n  && .ant-select-selector {\n    padding: 6px 12px;\n    height: auto;\n    border-color: 1px solid var(--dark-05-color);\n    color: var(--text-color);\n    \n    &:hover, &:active, &:focus {\n      border-color: var(--purple-04-color);\n      color: var(--primary-color);\n    }\n  }\n"]))),Object(P.b)(R.a)(xa||(xa=Object(w.a)(["\n  && {\n    user-select: none;\n    \n    &.ant-menu-inline .ant-menu-item:not(:last-child) {\n      margin-bottom: 0;\n    }\n  }\n"]))));Ta.Item=Object(P.b)(R.a.Item)(Oa||(Oa=Object(w.a)(["\n  &&& {\n    border-radius: 4px;\n    margin-bottom: 0;\n    margin-top: 0;\n    \n    &::after {\n      border-color: transparent;\n    }\n  \n    &.ant-menu-item-selected {\n      color: var(--primary-color);\n    \n      &::after {\n        border-color: transparent;\n      }\n    }\n  }\n"])));var Ra,Ma,Pa=Ta,Ea=Object(P.b)(Ir.a)(Ra||(Ra=Object(w.a)(["\n  && {\n    .ant-tabs-nav {\n      padding: 0 16px;\n      user-select: none;\n    }\n    \n    .ant-tabs-content-holder {\n      padding: 0 16px;\n    }\n  }\n"])));Ea.TabPane=Object(P.b)(Ir.a.TabPane)(Ma||(Ma=Object(w.a)(["\n  && {\n        \n  }\n"])));var qa,Aa,La=Ea,za=n(821),Fa=Object(P.b)(za.a)(qa||(qa=Object(w.a)(["\n  && {\n    user-select: none;\n    \n    .ant-tree-node-content-wrapper.ant-tree-node-selected {\n      color: white;\n    }\n  }\n"])));Fa.TreeNode=Object(P.b)(za.a.TreeNode)(Aa||(Aa=Object(w.a)(["\n  && {\n    \n  }\n"])));var Qa=Fa,_a=n(90);function Ua(e){var t=e.children;return Object(q.jsx)(_a.a,{overlayClassName:"missing-member-tooltip",placement:"top",title:"This member was removed from the data schema",color:"var(--dark-01-color)",children:t})}var Na=function(e){var t=e.disabled,n=void 0!==t&&t,r=e.members,a=e.availableMembers,i=e.missingMembers,o=e.addMemberName,s=e.updateMethods;return Object(q.jsxs)(Sa,{children:[r.map((function(e){var t=i.includes(e.title),r=Object(q.jsx)(ka,{disabled:n,className:n?"disabled":null,color:t?"danger":"primary",onRemoveClick:function(){return s.remove(e)},children:Object(q.jsx)(ha,{disabled:n,availableMembers:a,onClick:function(t){return s.update(e,t)},children:e.title})},e.index||e.name);return t?Object(q.jsx)(Ua,{children:r}):r})),Object(q.jsx)(ha,{disabled:n,availableMembers:a,type:"dashed","data-testid":o,icon:Object(q.jsx)(la.a,{}),onClick:function(e){return s.add(e)},children:r.length?null:o})]})},Ia={string:function(e){var t=e.values,n=void 0===t?[]:t,r=e.disabled,a=e.onChange;return Object(q.jsx)(Da,{disabled:r,style:{width:300},mode:"tags",value:n,maxTagCount:"responsive",onChange:a},"input")},number:function(e){var t=e.values,n=void 0===t?[]:t,r=e.disabled,a=e.onChange;return Object(q.jsx)(bt.a,{disabled:r,style:{width:300},onChange:function(e){return a([e.target.value])},value:n&&n[0]||""},"input")}};function Ba(e){var t=e.member,n=e.disabled,r=void 0!==n&&n,a=e.updateMethods,i=Ia[t.dimension.type]||Ia.string;return Object(q.jsx)(i,{disabled:r,values:t.values,onChange:function(e){return a.update(t,Object(u.a)(Object(u.a)({},t),{},{values:e}))}},"filter")}var Va,Ya=function(e){var t=e.disabled,n=void 0!==t&&t,r=e.members,a=e.availableMembers,i=e.addMemberName,o=e.updateMethods,s=e.missingMembers;return Object(q.jsxs)(Sa,{children:[r.map((function(e){var t=s.includes(e.member),r=Object(q.jsx)(ka,{disabled:n,className:n?"disabled":null,color:t?"danger":"primary",onRemoveClick:function(){return o.remove(e)},children:Object(q.jsx)(ha,{disabled:n,availableMembers:a,style:{width:150,textOverflow:"ellipsis",overflow:"hidden"},onClick:function(t){return o.update(e,Object(u.a)(Object(u.a)({},e),{},{dimension:t}))},children:e.dimension.title})});return Object(q.jsxs)(v.Fragment,{children:[t?Object(q.jsx)(Ua,{children:r}):r,Object(q.jsx)(Da,{disabled:n,value:e.operator,style:{width:200},onChange:function(t){return o.update(e,Object(u.a)(Object(u.a)({},e),{},{operator:t}))},children:e.operators.map((function(e){return Object(q.jsx)(Da.Option,{value:e.name,children:e.title},e.name)}))}),Object(q.jsx)(Ba,{disabled:n,member:e,updateMethods:o},"filterInput")]},e.index)})),Object(q.jsx)(ha,{availableMembers:a,type:"dashed",disabled:n,icon:Object(q.jsx)(la.a,{}),onClick:function(e){return o.add({member:e})},children:r.length?null:i})]})},Ja=n(818),Ka=P.b.div(Va||(Va=Object(w.a)(["\n  color: var(--dark-04-color);\n  line-height: 32px;\n"]))),Ha=Ja.a.RangePicker,Wa=[{title:"Custom",value:"custom"},{title:"All time",value:void 0},{value:"Today"},{value:"Yesterday"},{value:"This week"},{value:"This month"},{value:"This quarter"},{value:"This year"},{value:"Last 7 days"},{value:"Last 30 days"},{value:"Last week"},{value:"Last month"},{value:"Last quarter"},{value:"Last year"}],Ga=function(e){var t,n=e.members,r=void 0===n?[]:n,a=e.disabled,i=void 0!==a&&a,o=e.availableMembers,s=e.missingMembers,c=e.addMemberName,l=e.updateMethods,d=e.parsedDateRange,p=Array.isArray(null===(t=r[0])||void 0===t?void 0:t.dateRange),b=Object(v.useState)(!1),h=Object(_.a)(b,2),f=h[0],m=h[1];return Object(q.jsxs)(Sa,{children:[r.map((function(e,t){var n,r,a,c=s.includes(e.dimension.title),b=Object(q.jsx)(ka,{disabled:i,className:i?"disabled":null,color:c?"danger":"primary",onRemoveClick:function(){return l.remove(e)},children:Object(q.jsx)(ha,{"data-testid":"TimeDimension",disabled:i,availableMembers:o,onClick:function(t){return l.update(e,Object(u.a)(Object(u.a)({},e),{},{dimension:t}))},children:e.dimension.title})});return Object(q.jsxs)(v.Fragment,{children:[c?Object(q.jsx)(Ua,{children:b}):b,Object(q.jsx)(Ka,{children:"for"}),Object(q.jsx)(da,{disabled:i,overlay:(a=function(t){"custom"===t.value?m(!0):(l.update(e,Object(u.a)(Object(u.a)({},e),{},{dateRange:t.value})),m(!1))},Object(q.jsx)(R.a,{children:Wa.map((function(e){return Object(q.jsx)(R.a.Item,{onClick:function(){return a(e)},children:e.title||e.value},e.title||e.value)}))})),children:f||p?"Custom":e.dateRange||"All time"}),f||p?Object(q.jsx)(Ha,{disabled:i,format:"YYYY-MM-DD",defaultValue:(d||[]).map((function(e){return En()(e)})),onChange:function(t){return function(e,t){t&&!t.some((function(e){return!e}))&&l.update(e,Object(u.a)(Object(u.a)({},e),{},{dateRange:t.map((function(e){return e.format("YYYY-MM-DD")}))}))}(e,t)}}):null,Object(q.jsx)(Ka,{children:"by"}),Object(q.jsx)(da,{disabled:i,overlay:(n=e.dimension,r=function(t){return l.update(e,Object(u.a)(Object(u.a)({},e),{},{granularity:t.name}))},Object(q.jsx)(R.a,{children:n.granularities.length?n.granularities.map((function(e){return Object(q.jsx)(R.a.Item,{onClick:function(){return r(e)},children:e.title},e.title)})):Object(q.jsx)(R.a.Item,{disabled:!0,children:"No members found"})})),children:e.dimension.granularities.find((function(t){return t.name===e.granularity}))&&e.dimension.granularities.find((function(t){return t.name===e.granularity})).title})]},t)})),!r.length&&Object(q.jsx)(ha,{"data-testid":"TimeDimension",disabled:i,availableMembers:o,type:"dashed",icon:Object(q.jsx)(la.a,{}),onClick:function(e){return l.add({dimension:e,granularity:"day"})},children:c})]})},$a=n(844),Za=n(845),Xa=n(846),ei=n(847),ti=n(848),ni=n(201),ri=[{name:"line",title:"Line",icon:Object(q.jsx)($a.a,{})},{name:"area",title:"Area",icon:Object(q.jsx)(Za.a,{})},{name:"bar",title:"Bar",icon:Object(q.jsx)(Xa.a,{})},{name:"pie",title:"Pie",icon:Object(q.jsx)(ei.a,{})},{name:"table",title:"Table",icon:Object(q.jsx)(ti.a,{})},{name:"number",title:"Number",icon:Object(q.jsx)(ni.a,{})}],ai=function(e){var t=e.chartType,n=e.updateChartType,r=Object(q.jsx)(R.a,{"data-testid":"chart-type-dropdown",children:ri.map((function(e){return Object(q.jsxs)(R.a.Item,{onClick:function(){return n(e.name)},children:[e.icon," ",e.title]},e.title)}))}),a=ri.find((function(e){return e.name===t}));return Object(q.jsx)(da,{"data-testid":"chart-type-btn",overlay:r,icon:null==a?void 0:a.icon,style:{border:0},children:(null==a?void 0:a.title)||""})},ii=n(469),oi=n.n(ii),si=n(107),ci=n(849);function ui(e){var t=e.id,n=e.index;return Object(q.jsx)(si.b,{draggableId:t,index:n,children:function(e){var n=e.draggableProps,r=e.dragHandleProps,a=e.innerRef;return Object(q.jsx)("div",Object(u.a)(Object(u.a)(Object(u.a)({ref:a},n),r),{},{style:Object(u.a)(Object(u.a)({},n.style),{},{border:"1px dashed var(--dark-05-color)",borderRadius:4,padding:"5px 12px",lineHeight:"22px"}),children:Object(q.jsxs)(ae.a.Text,{ellipsis:!0,style:{maxWidth:"100%"},children:[Object(q.jsx)(ci.a,{style:{marginRight:8}}),t]})}))}})}function li(e){var t=e.pivotConfig,n=e.axis;return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(ae.a.Text,{strong:!0,style:{display:"flex",justifyContent:"center",padding:"8px 16px",background:"var(--light-5)",borderBottom:"1px solid var(--light-color)"},children:n}),Object(q.jsx)("div",{"data-testid":"pivot-popover-".concat(n),style:{padding:"8px"},children:Object(q.jsx)(si.c,{droppableId:n,children:function(e){return Object(q.jsxs)("div",Object(u.a)(Object(u.a)({ref:e.innerRef},e.droppableProps),{},{style:{display:"grid",gridTemplateColumns:"minmax(0, 1fr)",gap:"8px",height:"100%",minHeight:"32px"},children:[t[n].map((function(e,t){return Object(q.jsx)(ui,{id:e,index:t},e)})),e.placeholder]}))}})})]})}function di(e){var t=e.pivotConfig,n=e.onMove;return Object(q.jsx)(si.a,{onDragEnd:function(e){var t=e.source,r=e.destination;Object(ht.a)(e,["source","destination"]);r&&n({sourceIndex:t.index,destinationIndex:r.index,sourceAxis:t.droppableId,destinationAxis:r.droppableId})},children:Object(q.jsxs)(qe.a,{children:[Object(q.jsx)(Ae.a,{span:12,style:{minWidth:160},children:Object(q.jsx)(li,{pivotConfig:t,axis:"x"})}),Object(q.jsx)(Ae.a,{span:12,style:{minWidth:160},children:Object(q.jsx)(li,{pivotConfig:t,axis:"y"})})]})})}var pi=n(233);function bi(e){var t=e.pivotConfig,n=e.onUpdate;return Object(q.jsx)(pi.a,{checked:t.fillMissingDates,onChange:function(){return n({fillMissingDates:!t.fillMissingDates})},children:"Fill Missing Dates"})}var hi=n(285);function fi(e){var t=e.id,n=e.index,r=e.order,a=void 0===r?"none":r,i=e.children,o=e.onOrderChange;return Object(q.jsx)(si.b,{draggableId:t,index:n,children:function(e){var n=e.draggableProps,r=e.dragHandleProps,s=e.innerRef;return Object(q.jsxs)("div",Object(u.a)(Object(u.a)(Object(u.a)({"data-testid":"order-item",ref:s},n),r),{},{style:Object(u.a)({display:"flex",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",marginBottom:8},n.style),children:[Object(q.jsx)(ci.a,{}),Object(q.jsx)(ae.a.Text,{ellipsis:!0,style:{margin:"0 auto 0 8px",padding:"5px 0"},children:i}),Object(q.jsxs)(hi.a.Group,{onChange:function(e){return o(t,e.target.value)},defaultValue:a,size:"small",style:{marginLeft:"8px"},children:[Object(q.jsx)(hi.a.Button,{value:"asc",children:"ASC"}),Object(q.jsx)(hi.a.Button,{value:"desc",children:"DESC"}),Object(q.jsx)(hi.a.Button,{value:"none",children:"NONE"})]})]}))}})}function mi(e){var t=e.orderMembers,n=e.onOrderChange,r=e.onReorder;return Object(q.jsx)(si.a,{onDragEnd:function(e){var t=e.source,n=e.destination;r(t&&t.index,n&&n.index)},children:Object(q.jsx)(si.c,{droppableId:"droppable",children:function(e){return Object(q.jsxs)("div",Object(u.a)(Object(u.a)({"data-testid":"order-popover",ref:e.innerRef},e.droppableProps),{},{children:[t.map((function(e,t){var r=e.id,a=e.title,i=e.order;return Object(q.jsx)(fi,{id:r,index:t,order:i,onOrderChange:n,children:a},r)})),e.placeholder]}))}})})}var ji=n(825);function yi(e){var t=e.limit,n=void 0===t?5e3:t,r=e.onUpdate;return Object(q.jsxs)("label",{children:["Limit"," ",Object(q.jsx)(ji.a,{prefix:"Limit",value:n,step:500,onChange:function(e){return r({limit:e})}})]})}function vi(e){var t=e.pivotConfig,n=e.orderMembers,r=e.limit,a=e.disabled,i=e.onMove,o=e.onUpdate,s=e.onReorder,c=e.onOrderChange,u=e.isQueryPresent;return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(oi.a,{style:{lineHeight:"32px"},children:"Settings:"}),Object(q.jsx)(ve,{content:null===t?Object(q.jsx)(at.a,{}):Object(q.jsxs)("div",{"data-testid":"pivot-popover",children:[Object(q.jsx)(di,{pivotConfig:t,onMove:i}),Object(q.jsx)(sa.a,{style:{margin:0}}),Object(q.jsx)("div",{style:{padding:"8px"},children:Object(q.jsx)(bi,{pivotConfig:t,onUpdate:o})})]}),placement:"bottomLeft",trigger:"click",children:Object(q.jsx)(be,{"data-testid":"pivot-btn",disabled:!u||a,style:{border:0},children:"Pivot"})}),Object(q.jsx)(ve,{content:Object(q.jsx)("div",{style:{padding:"8px"},children:Object(q.jsx)(mi,{orderMembers:n,onReorder:s,onOrderChange:c})}),placement:"bottomLeft",trigger:"click",children:Object(q.jsx)(be,{"data-testid":"order-btn",disabled:!u||a,style:{border:0},children:"Order"})}),Object(q.jsx)(ve,{content:Object(q.jsx)("div",{style:{padding:"8px"},children:Object(q.jsx)(yi,{limit:r,onUpdate:o})}),placement:"bottomLeft",trigger:"click",children:Object(q.jsx)(be,{"data-testid":"limit-btn",disabled:!u||a,style:{border:0},children:"Limit"})})]})}var gi,xi,Oi,ki,wi,Si=n(76),Ci=n(200),Di=function(e){var t=e.status,n=e.uploading,r={loading:Object(q.jsx)(Si.a,{spin:!0}),inProgress:Object(q.jsx)(Si.a,{spin:!0}),running:Object(q.jsx)(Ci.a,{})};return n?r.loading:r[t]||r.loading},Ti=function(){var e=aa();return Object(q.jsx)(je,{bordered:!1,style:{borderRadius:0,borderBottom:1},children:Object(q.jsxs)(ie.b,{children:[Object(q.jsx)(ae.a.Text,{strong:!0,children:"Live preview mode"}),Object(q.jsx)(Di,{status:null==e?void 0:e.statusLivePreview.status,uploading:null==e?void 0:e.statusLivePreview.uploading}),Object(q.jsx)(ae.a.Text,{children:null==e?void 0:e.statusLivePreview.deploymentUrl})]})})},Ri=n(850),Mi=n(488),Pi=ae.a.Text,Ei=P.b.div(gi||(gi=Object(w.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n"]))),qi=P.b.div(xi||(xi=Object(w.a)(["\n  visibility: ",";\n  min-height: 400px;\n\n  & > iframe {\n    width: 100%;\n    min-height: 400px;\n    border: none;\n  }\n"])),(function(e){return e.invisible?"hidden":"visible"})),Ai=P.b.div(Oi||(Oi=Object(w.a)(["\n  position: absolute;\n  width: 100%;\n  bottom: -4em;\n  animation: fadeIn 0.3s;\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n\n    to {\n      opacity: 1;\n    }\n  }\n"]))),Li=P.b.div(ki||(ki=Object(w.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n"]))),zi=P.b.div(wi||(wi=Object(w.a)(["\n  position: relative;\n  width: 100%;\n  text-align: center;\n"])));function Fi(e){var t=e.areQueriesEqual,n=e.queryError,r=e.iframeRef,a=e.framework,i=e.isChartRendererReady,o=e.queryHasMissingMembers,s=e.isQueryLoading,c=e.onChartRendererReadyChange,l=e.onQueryStatusChange,d=e.onRunButtonClick,p=e.onQueryChange,b=Object(v.useRef)(null),h=Object(v.useState)(!1),f=Object(_.a)(h,2),m=f[0],j=f[1],y=Object(v.useState)(!1),g=Object(_.a)(y,2),x=g[0],k=g[1],w=Object(v.useState)(!1),S=Object(_.a)(w,2),C=S[0],D=S[1],T=Object(v.useState)(!1),R=Object(_.a)(T,2),M=R[0],P=R[1];Object(Mi.a)("cmd+enter",(function(){var e;null===(e=b.current)||void 0===e||e.click()})),Object(v.useEffect)((function(){return function(){c(!1)}}),[]),Object(v.useEffect)((function(){p()}),[t]),Object(v.useEffect)((function(){k(!1)}),[a]),Object(v.useLayoutEffect)((function(){window.__cubejsPlayground=Object(u.a)(Object(u.a)({},window.__cubejsPlayground),{},{onQueryStart:function(){l({isLoading:!0})},onQueryLoad:function(e){var t=e.resultSet,n=e.error;if(t){var r=t.serialize().loadResponse;D(Boolean(r.slowQuery)),Boolean(r.slowQuery)&&j(!1),k(!0)}(t||n)&&l({resultSet:t,error:n,isLoading:!1})},onQueryProgress:function(e){var t,n;P(Boolean(null==e||null===(t=e.stage)||void 0===t?void 0:t.stage.includes("pre-aggregation")));var r=(null==e||null===(n=e.stage)||void 0===n?void 0:n.stage.includes("Executing query"))&&(e.stage.timeElapsed||0)>=5e3;j(r),r&&D(!1)},onChartRendererReady:function(){c(!0)}})}),[a,c]);var E=!i||o||s||M,A=!i||M||Boolean(n)||o||E||!t||!x,L=m?"This query takes more than 5 seconds to execute. Please consider using pre-aggregations to improve its performance. ":C?"This query takes more than 5 seconds to execute. It was served from the cache because Cube.js wasn't able to renew it in less than 5 seconds. Please consider using pre-aggregations to improve its performance. ":"";return Object(q.jsxs)(q.Fragment,{children:[(m||C)&&Object(q.jsx)(O.a,{style:{marginBottom:24},message:L,type:"warning"}),n?Object(q.jsx)("div",{children:null==n?void 0:n.toString()}):o?Object(q.jsx)("div",{children:"At least one of the query members is missing from your data schema. Please update your query or data schema."}):E?Object(q.jsx)(Ei,{children:Object(q.jsx)(Li,{children:Object(q.jsxs)(zi,{children:[Object(q.jsx)(ne,{full:!1}),M&&Object(q.jsx)(Ai,{children:Object(q.jsx)(Pi,{strong:!0,style:{fontSize:18},children:"Building pre-aggregations..."})})]})})}):t&&x?null:Object(q.jsx)(Ei,{children:Object(q.jsx)(Li,{children:Object(q.jsx)(be,{"data-testid":"run-query-btn",ref:b,size:"large",type:"primary",loading:s,icon:Object(q.jsx)(Ri.a,{}),onClick:d,children:"Run"})})}),Object(q.jsx)(qi,{invisible:A,children:Object(q.jsx)("iframe",{"data-testid":"chart-renderer",ref:r,title:"Chart renderer",src:"/chart-renderers/".concat(a,"/index.html")})})]})}var Qi,_i=n(205),Ui=n(851),Ni=n(852),Ii=n(487),Bi=n(853),Vi=n(854),Yi=n(470),Ji=n(231),Ki=n(357),Hi=n.n(Ki),Wi=function(e){Object(j.a)(n,e);var t=Object(y.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidMount",value:function(){Hi.a.highlightAll()}},{key:"componentDidUpdate",value:function(){Hi.a.highlightAll()}},{key:"render",value:function(){return Object(q.jsx)("pre",{"data-testid":"prism-code",style:this.props.style,children:Object(q.jsx)("code",{className:"language-javascript",children:this.props.code})})}}]),n}(v.Component),Gi=n(817),$i=function(e){var t=e.query;return Object(q.jsx)(Pr,{loadSql:!0,query:Object(u.a)(Object(u.a)({},t),{},{renewQuery:!0}),render:function(e){var t=e.sqlQuery,n=e.resultSet,r=((null==n?void 0:n.serialize())||{}).loadResponse,a=null==t?void 0:t.rawQuery();return Object(q.jsxs)(Ir.a,{defaultActiveKey:"refreshKeys",tabBarExtraContent:Object(q.jsxs)("span",{children:["Last Refresh Time: ",Object(q.jsx)("b",{children:null==r?void 0:r.lastRefreshTime})]}),children:[Object(q.jsx)(Ir.a.TabPane,{tab:"Refresh Keys",children:Object(q.jsx)(Gi.a,{loading:!t,pagination:!1,scroll:{x:!0},columns:[{title:"Refresh Key SQL",key:"refreshKey",render:function(e,t){return Object(q.jsx)(Wi,{code:Object(Ji.format)(t[0])})}},{title:"Value",key:"value",render:function(e,t){return Object(q.jsx)(Wi,{code:(null==r?void 0:r.refreshKeyValues)&&a&&JSON.stringify(r.refreshKeyValues[a.cacheKeyQueries.queries.indexOf(t)],null,2)})}}],dataSource:null==a?void 0:a.cacheKeyQueries.queries})},"refreshKeys"),Object(q.jsx)(Ir.a.TabPane,{tab:"Pre-aggregations",children:Object(q.jsx)(Gi.a,{loading:!t,pagination:!1,scroll:{x:!0},columns:[{title:"Table Name",key:"tableName",dataIndex:"tableName",render:function(e){return Object(q.jsx)("b",{children:e})}},{title:"Refresh Key SQL",key:"refreshKey",dataIndex:"invalidateKeyQueries",render:function(e){return e.map((function(e){return Object(q.jsx)(Wi,{code:Object(Ji.format)(e[0])},e[0])}))}},{title:"Refresh Key Value",key:"value",render:function(e,t){return null==r?void 0:r.usedPreAggregations[t.tableName].refreshKeyValues.map((function(e){return Object(q.jsx)(Wi,{code:JSON.stringify(e,null,2)},JSON.stringify(e))}))}}],dataSource:null==a?void 0:a.preAggregations})},"preAggregations"),Object(q.jsx)(Ir.a.TabPane,{tab:"Rollup Match Results",children:Object(q.jsx)(Gi.a,{loading:!t,pagination:!1,scroll:{x:!0},columns:[{title:"Rollup Name",key:"name",dataIndex:"name",render:function(e){return Object(q.jsx)("b",{children:e})}},{title:"Rollup Definition",key:"rollup",dataIndex:"references",render:function(e){return Object(q.jsx)(Wi,{code:JSON.stringify(e,null,2)})}},{title:"Can Be Used",key:"canUsePreAggregation",dataIndex:"canUsePreAggregation",render:function(e){return e?Object(q.jsx)(Yr.a,{style:{color:"#52c41a",fontSize:"2em"}}):Object(q.jsx)(fa.a,{style:{color:"#c2371b",fontSize:"2em"}})}}],dataSource:null==a?void 0:a.rollupMatchResults})},"rollupMatchResults")]})}})},Zi={react:"create-react-app",angular:"angular-cli",vue:"vue-cli"},Xi=Object(P.b)(je)(Qi||(Qi=Object(w.a)(["\n  .ant-card-head {\n    position: sticky;\n    top: 0;\n    z-index: 100;\n    background: white;\n  }\n\n  .ant-card-body {\n    max-width: 100%;\n    overflow: auto;\n    position: relative;\n  }\n"]))),eo=[{id:"react",title:"React",supported:!0,scaffoldingSupported:!0},{id:"angular",title:"Angular",supported:!0,scaffoldingSupported:!0},{id:"vue",title:"Vue",supported:!0,scaffoldingSupported:!0},{id:"vanilla",title:"Vanilla JavaScript",docsLink:"https://cube.dev/docs/@cubejs-client-core"}],to=function(e){Object(j.a)(n,e);var t=Object(y.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).state={showCode:!1,chartRendererError:null},r}return Object(m.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.codeExample,r=t.codesandboxFiles,a=t.dependencies,i=t.redirectToDashboard,o=t.showCode,s=t.addingToDashboard,d=t.chartRendererError,p=this.props,h=p.isChartRendererReady,f=p.resultSet,m=p.error,j=p.render,y=p.dashboardSource,v=p.hideActions,g=p.query,x=p.chartingLibrary,O=p.setChartLibrary,k=p.chartLibraries,w=p.history,S=p.framework,C=p.setFramework,D=p.isFetchingMeta,T=p.onChartRendererReadyChange;if(i)return Object(q.jsx)(b.a,{to:"/dashboard"});if(d)return Object(q.jsx)("div",{children:d});var P,E=h?Object(Yi.getParameters)(function(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{files:Object(u.a)(Object(u.a)(Object(u.a)({},null===(n=Xe[e])||void 0===n?void 0:n.files),Object.entries(t).map((function(e){var t=Object(_.a)(e,2);return{[t[0]]:{content:t[1]}}})).reduce((function(e,t){return Object(u.a)(Object(u.a)({},e),t)}),{})),{},{"package.json":{content:{dependencies:Object(u.a)(Object(u.a)({},null===(r=Xe[e])||void 0===r?void 0:r.dependencies),a.reduce((function(e,t){var n=Array.isArray(t)?t:[t,"latest"],r=Object(_.a)(n,2),a=r[0],i=r[1];return Object(u.a)(Object(u.a)({},e),{},{[a]:i})}),{}))}}}),template:e}}(Zi[S],r,a)):null,A=(k[S]||[]).length>0?Object(q.jsx)(R.a,{"data-testid":"charting-library-dropdown",onClick:function(e){Re("Set Chart Library",{chartingLibrary:e.key}),O(e.key)},children:(k[S]||[]).map((function(e){return Object(q.jsx)(R.a.Item,{children:e.title},e.value)}))}):null,L=Object(q.jsx)(R.a,{"data-testid":"framework-dropdown",onClick:function(e){var t,n;e.key!==S&&(Re("Set Framework",{framework:e.key}),C(e.key),T(!1),O((null===(t=k[e.key])||void 0===t||null===(n=t[0])||void 0===n?void 0:n.value)||null))},children:eo.map((function(e){return Object(q.jsx)(R.a.Item,{children:e.title},e.id)}))}),z=(k[S]||[]).find((function(e){return e.value===x})),F=eo.find((function(e){return e.id===S})),Q=Object(q.jsxs)("form",{action:"https://codesandbox.io/api/v1/sandboxes/define",method:"POST",target:"_blank",children:[null!=E?Object(q.jsx)("input",{type:"hidden",name:"parameters",value:E}):null,Object(q.jsxs)(Sa,{children:[Object(q.jsxs)(be.Group,{children:[Object(q.jsx)(M.a,{overlay:L,disabled:D,children:Object(q.jsxs)(be,{"data-testid":"framework-btn",size:"small",children:[null==F?void 0:F.title,Object(q.jsx)(_i.a,{})]})}),A?Object(q.jsx)(M.a,{overlay:A,disabled:!(null==F?void 0:F.supported)||D,children:Object(q.jsxs)(be,{"data-testid":"charting-library-btn",size:"small",children:[null==z?void 0:z.title,Object(q.jsx)(_i.a,{})]})}):null]}),Object(q.jsxs)(be.Group,{children:[Object(q.jsx)(be,{"data-testid":"chart-btn",size:"small",type:o?"default":"primary",disabled:!(null==F?void 0:F.supported)||D,onClick:function(){Re("Show Chart"),e.setState({showCode:null})},children:"Chart"}),Object(q.jsx)(be,{"data-testid":"json-query-btn",icon:Object(q.jsx)(Ui.a,{}),size:"small",type:"query"===o?"primary":"default",disabled:!(null==F?void 0:F.supported)||D,onClick:function(){Re("Show Query"),e.setState({showCode:"query"})},children:"JSON Query"}),Object(q.jsx)(be,{"data-testid":"code-btn",icon:Object(q.jsx)(Ni.a,{}),size:"small",type:"code"===o?"primary":"default",disabled:!(null==F?void 0:F.supported)||D,onClick:function(){Re("Show Code"),e.setState({showCode:"code"})},children:"Code"}),Object(q.jsx)(be,{"data-testid":"sql-btn",icon:Object(q.jsx)(Ii.a,{}),size:"small",type:"sql"===o?"primary":"default",disabled:!(null==F?void 0:F.supported)||D,onClick:function(){Re("Show SQL"),e.setState({showCode:"sql"})},children:"SQL"}),Object(q.jsx)(be,{"data-testid":"cache-btn",icon:Object(q.jsx)(Bi.a,{}),size:"small",type:"cache"===o?"primary":"default",disabled:!(null==F?void 0:F.supported)||D,onClick:function(){Re("Show Cache"),e.setState({showCode:"cache"})},children:"Cache"})]}),Object(q.jsx)(be,{"data-testid":"edit-btn",icon:Object(q.jsx)(Vi.a,{}),size:"small",htmlType:"submit",disabled:!(null==F?void 0:F.supported)||D,onClick:function(){return Re("Open Code Sandbox")},children:"Edit"}),y&&Object(q.jsx)(be,{"data-testid":"add-to-dashboard-btn",onClick:Object(l.a)(c.a.mark((function t(){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({addingToDashboard:!0}),t.next=3,y.canAddChart();case 3:if("boolean"!=typeof(r=t.sent)||!r){t.next=11;break}return Re("Add to Dashboard"),t.next=8,y.addChart(n);case 8:e.setState({redirectToDashboard:!0,addingToDashboard:!1}),t.next=12;break;case 11:r?(e.setState({addingToDashboard:!1}),Br.a.error({title:"There is an error loading your dashboard app",content:r,okText:"Fix",okCancel:!0,onOk:function(){w.push("/dashboard")}})):(e.setState({addingToDashboard:!1}),Br.a.error({title:"Your dashboard app does not support adding of static charts",content:"Please use static dashboard template"}));case 12:case"end":return t.stop()}}),t)}))),icon:Object(q.jsx)(la.a,{}),size:"small",loading:s,disabled:!(null==F?void 0:F.supported)||D,type:"primary",children:s?"Preparing dashboard app. It may take a while. Please check console for progress...":"Add to Dashboard"})]})]}),U=JSON.stringify(g,null,2);return P="code"===o?Object(q.jsxs)(Sa,{children:[Object(q.jsx)("div",{children:"Query"}),Object(q.jsx)(be,{"data-testid":"copy-code-btn",icon:Object(q.jsx)(St.a,{}),size:"small",onClick:Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt(n);case 2:Re("Copy Code to Clipboard");case 3:case"end":return e.stop()}}),e)}))),type:"primary",children:"Copy to Clipboard"})]}):"query"===o?Object(q.jsxs)(Sa,{children:[Object(q.jsx)("div",{children:"Query"}),Object(q.jsx)(be,{"data-testid":"copy-cube-query-btn",icon:Object(q.jsx)(St.a,{}),size:"small",onClick:Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt(JSON.stringify(g,null,2));case 2:Re("Copy Query to Clipboard");case 3:case"end":return e.stop()}}),e)}))),type:"primary",children:"Copy to Clipboard"})]}):"sql"===o?"SQL":"Chart",v?j({resultSet:f,error:m}):Object(q.jsx)(Xi,{title:P,style:{minHeight:420},extra:Q,children:(null==F?void 0:F.supported)?"code"===o?Object(q.jsx)(Wi,{code:n}):"query"===o?Object(q.jsx)(Wi,{code:U}):"sql"===o?Object(q.jsx)(Pr,{loadSql:"only",query:g,render:function(e){var t=e.sqlQuery,n=Array.isArray(t)?t:[t],r=Object(_.a)(n,1)[0];return Object(q.jsx)(Wi,{code:r&&Object(Ji.format)(r.sql())})}}):"cache"===o?Object(q.jsx)($i,{query:g}):j({framework:S,error:m}):Object(q.jsxs)("h2",{style:{padding:24,textAlign:"center"},children:["We do not support ",null==F?void 0:F.title," code generation here yet.",Object(q.jsx)("br",{}),"Please refer to ",Object(q.jsxs)("a",{href:null==F?void 0:F.docsLink,target:"_blank",rel:"noopener noreferrer",onClick:function(){return Re("Unsupported Framework Docs",{framework:S})},children:[null==F?void 0:F.title," docs"]})," to see on how to use it with Cube.js."]})})}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.isChartRendererReady&&null!=e.iframeRef.current&&e.chartingLibrary){var n=e.iframeRef.current.contentWindow.__cubejsPlayground;if(!n)return Object(u.a)(Object(u.a)({},t),{},{chartRendererError:"The chart renderer failed to load"});var r=n.getCodesandboxFiles(e.chartingLibrary,{chartType:e.chartType,query:JSON.stringify(e.query,null,2),pivotConfig:JSON.stringify(e.pivotConfig,null,2),apiUrl:e.apiUrl,cubejsToken:e.cubejsToken}),a="";return"react"===e.framework?a=r["index.js"]:"angular"===e.framework?a=r["src/app/query-renderer/query-renderer.component.ts"]:"vue"===e.framework&&(a=r["src/components/ChartRenderer.vue"]),Object(u.a)(Object(u.a)({},t),{},{chartRendererError:null,dependencies:n.getDependencies(e.chartingLibrary),codeExample:a,codesandboxFiles:r})}return t}}]),n}(v.Component);to.defaultProps={query:{},hideActions:!1};var no,ro=Object(b.g)(to),ao=P.b.div(no||(no=Object(w.a)(["\n  display: flex;\n  flex-flow: column;\n  margin-right: 24px;\n  margin-bottom: 16px;\n\n  > *:first-child {\n    margin-bottom: 8px;\n  }\n"]))),io={react:[{value:"bizcharts",title:"Bizcharts"},{value:"recharts",title:"Recharts"},{value:"d3",title:"D3"},{value:"chartjs",title:"Chart.js"}],angular:[{value:"angular-ng2-charts",title:"ng2"}],vue:[{value:"chartkick",title:"Chartkick"}]},oo=function(e,t){return Object.keys(e).map((function(n){return{[n]:function(r,a){var i="".concat(n.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")," Member");(null==a?void 0:a.values)&&(i="Update Filter Values"),(null==a?void 0:a.dateRange)&&(i="Update Date Range"),(null==a?void 0:a.granularity)&&(i="Update Granularity"),Re(i,{memberName:t});for(var o=arguments.length,s=new Array(o>2?o-2:0),c=2;c<o;c++)s[c-2]=arguments[c];return e[n].apply(null,[r,a].concat(s))}}})).reduce((function(e,t){return Object(u.a)(Object(u.a)({},e),t)}),{})};function so(e){var t,n,r=e.iframeRef,a=e.pivotConfig;return Object(v.useEffect)((function(){(null==r?void 0:r.current)&&et(r.current.contentDocument,"chart",{pivotConfig:a})}),(t=[r,a],n=Object(v.useRef)([]),_r()(t,n.current)||(n.current=t),n.current)),null}function co(e){var t=e.apiUrl,n=e.cubejsToken,r=e.defaultQuery,a=e.dashboardSource,i=e.schemaVersion,o=void 0===i?0:i,s=e.initialVizState,c=e.onSchemaChange,u=e.onVizStateChanged,l=Object(v.useRef)(null),d=Object(v.useRef)(null),p=Object(v.useState)("react"),b=Object(_.a)(p,2),h=b[0],f=b[1],m=Object(v.useState)("bizcharts"),j=Object(_.a)(m,2),y=j[0],g=j[1],x=Object(v.useState)(!1),O=Object(_.a)(x,2),k=O[0],w=O[1],S=Object(v.useState)(!1),C=Object(_.a)(S,2),D=C[0],T=C[1],R=Object(v.useState)(null),M=Object(_.a)(R,2),P=M[0],E=M[1],A=ea(),L=A.token,z=A.setIsModalOpen,F=aa();return Object(v.useEffect)((function(){k&&l.current&&et(l.current.contentDocument,"credentials",{token:n,apiUrl:t})}),[l,n,t,k]),Object(q.jsx)(zr,{defaultQuery:r,initialVizState:s,wrapWithQueryRenderer:!1,schemaVersion:o,onSchemaChange:c,onVizStateChanged:u,render:function(e){var r,i,o,s=e.query,c=e.error,u=e.metaError,p=e.isQueryPresent,b=e.chartType,m=e.updateChartType,j=e.measures,v=e.availableMeasures,x=e.updateMeasures,O=e.dimensions,S=e.availableDimensions,C=e.updateDimensions,R=e.segments,M=e.availableSegments,A=e.updateSegments,Q=e.filters,_=e.updateFilters,U=e.timeDimensions,N=e.availableTimeDimensions,I=e.updateTimeDimensions,B=e.orderMembers,V=e.updateOrder,Y=e.pivotConfig,J=e.updatePivotConfig,K=e.missingMembers,H=e.isFetchingMeta,W=e.dryRunResponse;if(W){var G,$=(W.pivotQuery||{}).timeDimensions;o=null===(G=(void 0===$?[]:$)[0])||void 0===G?void 0:G.dateRange}else Array.isArray(null===(r=s.timeDimensions)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.dateRange)&&(o=s.timeDimensions[0].dateRange);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(qe.a,{children:Object(q.jsx)(Ae.a,{span:24,children:Object(q.jsx)(je,{bordered:!1,style:{borderRadius:0,borderBottom:1},children:Object(q.jsxs)(be.Group,{children:[Object(q.jsxs)(be,{"data-testid":"security-context-btn",icon:Object(q.jsx)(ca.a,{}),size:"small",type:L?"primary":"default",onClick:function(){return z(!0)},children:[L?"Edit":"Add"," Security Context"]}),F&&!F.livePreviewDisabled&&Object(q.jsxs)(be,{"data-testid":"live-preview-btn",icon:Object(q.jsx)(ua.a,{}),size:"small",type:F.statusLivePreview.active?"primary":"default",onClick:function(){return F.statusLivePreview.active?F.stopLivePreview():F.startLivePreview()},children:[F.statusLivePreview.active?"Stop":"Start"," ","Live Preview"]})]})})})}),(null==F?void 0:F.statusLivePreview.active)&&Object(q.jsx)(qe.a,{children:Object(q.jsx)(Ae.a,{span:24,children:Object(q.jsx)(Ti,{})})}),Object(q.jsx)(sa.a,{style:{margin:0}}),Object(q.jsx)(qe.a,{justify:"space-around",align:"top",gutter:24,style:{marginBottom:12},children:Object(q.jsxs)(Ae.a,{span:24,children:[Object(q.jsx)(je,{bordered:!1,style:{borderRadius:0},children:Object(q.jsxs)(qe.a,{align:"top",gutter:0,style:{marginBottom:-12},children:[Object(q.jsxs)(ao,{children:[Object(q.jsx)(wa,{children:"Measures"}),Object(q.jsx)(Na,{disabled:H,members:j,availableMembers:v,missingMembers:K,addMemberName:"Measure",updateMethods:oo(x,"Measure")})]}),Object(q.jsxs)(ao,{children:[Object(q.jsx)(wa,{children:"Dimensions"}),Object(q.jsx)(Na,{disabled:H,members:O,availableMembers:S,missingMembers:K,addMemberName:"Dimension",updateMethods:oo(C,"Dimension")})]}),Object(q.jsxs)(ao,{children:[Object(q.jsx)(wa,{children:"Segment"}),Object(q.jsx)(Na,{disabled:H,members:R,availableMembers:M,missingMembers:K,addMemberName:"Segment",updateMethods:oo(A,"Segment")})]}),Object(q.jsxs)(ao,{children:[Object(q.jsx)(wa,{children:"Time"}),Object(q.jsx)(Ga,{disabled:H,members:U,availableMembers:N,missingMembers:K,addMemberName:"Time",updateMethods:oo(I,"Time"),parsedDateRange:o})]}),Object(q.jsxs)(ao,{children:[Object(q.jsx)(wa,{children:"Filters"}),Object(q.jsx)(Ya,{disabled:H,members:Q,availableMembers:S.concat(v),missingMembers:K,addMemberName:"Filter",updateMethods:oo(_,"Filter")})]})]})}),Object(q.jsxs)(Sa,{style:{marginTop:16,marginLeft:16},children:[Object(q.jsx)(ai,{chartType:b||"line",updateChartType:function(e){Re("Change Chart Type"),m(e),l.current&&et(l.current.contentDocument,"chart",{chartType:e,chartingLibrary:y})}}),Object(q.jsx)(vi,{isQueryPresent:p,limit:s.limit,pivotConfig:Y,disabled:H,orderMembers:B,onReorder:V.reorder,onOrderChange:V.set,onMove:J.moveItem,onUpdate:J.update})]})]})}),Object(q.jsx)(qe.a,{justify:"space-around",align:"top",gutter:24,style:{marginRight:0,marginLeft:0},children:Object(q.jsxs)(Ae.a,{span:24,style:{paddingLeft:16,paddingRight:16},children:[!p&&u?Object(q.jsx)(je,{children:Object(q.jsx)(ue,{error:u})}):null,!p&&!u&&Object(q.jsx)("h2",{style:{textAlign:"center"},children:"Choose a measure or dimension to get started"}),p&&Object(q.jsx)(ro,{apiUrl:t,cubejsToken:n,iframeRef:l,isChartRendererReady:k,query:s,error:c,chartType:b,pivotConfig:Y,framework:h,chartingLibrary:y,setFramework:f,setChartLibrary:function(e){l.current&&et(l.current.contentDocument,"chart",{chartingLibrary:e}),g(e)},chartLibraries:io,dashboardSource:a,isFetchingMeta:H,render:function(e){var t=e.framework;return u?Object(q.jsx)(ue,{error:u}):Object(q.jsx)(Fi,{areQueriesEqual:dr(s,d.current),isQueryLoading:D,isChartRendererReady:k&&!H,queryError:P,framework:t,chartType:b||"line",query:s,pivotConfig:Y,iframeRef:l,queryHasMissingMembers:K.length>0,onQueryStatusChange:function(e){var t=e.isLoading,n=e.resultSet,r=e.error;n&&E(null),r&&E(r),T(t)},onChartRendererReadyChange:w,onRunButtonClick:function(){k&&l.current&&0===K.length&&function(e){var t=e.query,n=e.pivotConfig,r=e.chartType;l.current&&(dr(t,d.current)?(et(l.current.contentDocument,"chart",{pivotConfig:n,query:t,chartType:r,chartingLibrary:y}),et(l.current.contentDocument,"refetch")):et(l.current.contentDocument,"chart",{pivotConfig:n,query:t,chartType:r,chartingLibrary:y})),E(null),d.current=t}({query:s,pivotConfig:Y,chartType:b||"line"})},onQueryChange:function(){P&&E(null)}})},onChartRendererReadyChange:w})]})}),Object(q.jsx)(so,{iframeRef:l,pivotConfig:Y})]})}})}function uo(){var e=Object(v.useMemo)((function(){return new Bt}),[]),t=Object(b.f)(),n=t.push,r=t.location,a=ea().token,i=Object(v.useState)(0),o=Object(_.a)(i,2),s=o[0],d=o[1],p=Object(v.useState)(null),h=Object(_.a)(p,2),f=h[0],m=h[1],j=Object(v.useState)(null),y=Object(_.a)(j,2),g=y[0],x=y[1],O=Object(v.useState)(null),w=Object(_.a)(O,2),S=w[0],C=w[1],D=(null==S?void 0:S.token)||a||(null==g?void 0:g.cubejsToken),T=function(e,t){return Object(v.useMemo)((function(){return t&&e&&"undefined"!==t?xr(t,{apiUrl:e}):null}),[e,t])}(f,D),R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/cubejs-api";m("".concat(e).concat(t,"/v1"))},M=function(){var e=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)("/playground/context");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,x(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(Object(v.useEffect)((function(){M()}),[]),Object(v.useLayoutEffect)((function(){f&&D&&(window.__cubejsPlayground=Object(u.a)(Object(u.a)({},window.__cubejsPlayground),{},{apiUrl:f,token:D}))}),[D,f]),Object(v.useLayoutEffect)((function(){g&&null===S&&R(g.apiUrl||window.location.href.split("#")[0].replace(/\/$/,""),g.basePath)}),[g,S]),!T||!f)return null;var P=new URLSearchParams(r.search),E=JSON.parse(P.get("query")||"{}");return Object(q.jsx)(ra,{disabled:null==(null==g?void 0:g.livePreview)||!g.livePreview,onChange:function(e){var t=e.token,n=e.apiUrl;t&&n?(C({token:t,apiUrl:n}),R(n,null==g?void 0:g.basePath)):(m(null),C(null)),d((function(e){return e+1}))},children:Object(q.jsx)(Fr,{cubejsApi:T,children:Object(q.jsx)(co,{defaultQuery:E,apiUrl:f,cubejsToken:D,dashboardSource:e,schemaVersion:s,onVizStateChanged:function(e){var t=e.query;return n("/build?query=".concat(JSON.stringify(t)))}})})})}var lo,po,bo,ho,fo,mo,jo=n(132),yo=x.a.Content,vo=x.a.Sider,go=Qa.TreeNode,xo=La.TabPane,Oo={},ko=function(e){Object(j.a)(o,e);var t,n,r,a,i=Object(y.a)(o);function o(e){var t;return Object(f.a)(this,o),(t=i.call(this,e)).state={expandedKeys:[],autoExpandParent:!0,checkedKeys:[],selectedKeys:[],activeTab:"schema",files:[]},t}return Object(m.a)(o,[{key:"componentDidMount",value:(a=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadDBSchema();case 2:return e.next=4,this.loadFiles();case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"onExpand",value:function(e){Re("Expand Tables"),this.setState({expandedKeys:e,autoExpandParent:!1})}},{key:"onCheck",value:function(e){Re("Check Tables"),this.setState({checkedKeys:e})}},{key:"onSelect",value:function(e){this.setState({selectedKeys:e})}},{key:"loadDBSchema",value:(r=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({schemaLoading:!0}),e.prev=1,e.next=4,Nt("/playground/db-schema");case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,this.setState({tablesSchema:n.tablesSchema}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.setState({schemaLoadingError:e.t0});case 14:return e.prev=14,this.setState({schemaLoading:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))),function(){return r.apply(this,arguments)})},{key:"loadFiles",value:(n=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt("/playground/files");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({files:n.files});case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"generateSchema",value:(t=Object(l.a)(c.a.mark((function e(){var t,n,r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.checkedKeys,r=t.tablesSchema,a=this.props.history,Re("Generate Schema"),e.next=5,Nt("/playground/generate-schema",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tables:n.filter((function(e){return!!Oo[e]})).map((function(e){return Oo[e]})),tablesSchema:r})});case 5:if(200!==(i=e.sent).status){e.next=14;break}return Re("Generate Schema Success"),e.next=10,this.loadFiles();case 10:this.setState({checkedKeys:[],activeTab:"files"}),Br.a.success({title:"Schema files successfully generated!",content:"You can start building the charts",okText:"Build",cancelText:"Close",okCancel:!0,onOk:function(){a.push("/build")}}),e.next=20;break;case 14:return e.t0=Re,e.next=17,i.text();case 17:e.t1=e.sent,e.t2={error:e.t1},(0,e.t0)("Generate Schema Fail",e.t2);case 20:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"selectedFileContent",value:function(){var e=this.selectedFile();return e&&e.content}},{key:"selectedFile",value:function(){var e=this.state,t=e.files,n=e.selectedFile;return t.find((function(e){return e.fileName===n}))}},{key:"renderFilesMenu",value:function(){var e=this,t=this.state,n=t.selectedFile,r=t.files;return Object(q.jsx)(Pa,{mode:"inline",onClick:function(t){var n=t.key;Re("Select File"),e.setState({selectedFile:n})},selectedKeys:n?[n]:[],children:r.map((function(e){return Object(q.jsx)(Pa.Item,{children:e.fileName},e.fileName)}))})}},{key:"render",value:function(){var e,t=this,n=this.state,r=n.schemaLoading,a=n.schemaLoadingError,i=n.tablesSchema,o=n.selectedFile,s=n.expandedKeys,c=n.autoExpandParent,l=n.checkedKeys,d=n.selectedKeys,p=n.activeTab,b=function e(t){return t.map((function(t){return t.treeData?Object(q.jsx)(go,{title:t.title,dataRef:t,children:e(t.treeData)},t.key):Object(q.jsx)(go,Object(u.a)({},t))}))};return Object(q.jsxs)(x.a,{style:{height:"100%"},children:[Object(q.jsx)(vo,{width:340,className:"schema-sidebar",children:Object(q.jsxs)(La,{activeKey:p,onChange:function(e){return t.setState({activeTab:e})},tabBarExtraContent:Object(q.jsx)(pe.a,{disabled:!l.length,type:"primary",onClick:function(){return t.generateSchema()},children:"Generate Schema"}),children:[Object(q.jsx)(xo,{tab:"Tables",children:r?Object(q.jsx)(ne,{}):a?Object(q.jsx)(G,{message:"Error while loading DB schema",description:a.toString(),type:"error"}):Object.keys(i||{}).length>0?Object(q.jsx)(Qa,{checkable:!0,onExpand:t.onExpand.bind(t),expandedKeys:s,autoExpandParent:c,onCheck:t.onCheck.bind(t),checkedKeys:l,onSelect:t.onSelect.bind(t),selectedKeys:d,children:b((e=i||{},Object.keys(e).map((function(t){return{title:t,key:t,treeData:Object.keys(e[t]).map((function(e){var n="".concat(t,".").concat(e);return Oo[n]=[t,e],{title:e,key:n}}))}}))))}):Object(q.jsx)(G,{message:"Empty DB Schema",description:"Please check connection settings",type:"warning"})},"schema"),Object(q.jsx)(xo,{tab:"Files",children:this.renderFilesMenu()},"files")]})}),Object(q.jsxs)(yo,{style:{minHeight:280,padding:24},children:[o&&Object(q.jsx)(G,{message:Object(q.jsxs)("span",{children:["This file can be edited at ",Object(q.jsx)("b",{children:this.selectedFile().absPath})]}),type:"info",style:{paddingTop:10,paddingBottom:11}}),o?Object(q.jsx)(Wi,{code:this.selectedFileContent(),style:{padding:0,marginTop:24}}):Object(q.jsx)(jo.a,{style:{marginTop:50},description:"Select tables to generate Cube.js schema"})]})]})}}]),o}(v.Component),wo=function(e){Object(j.a)(a,e);var t,n,r=Object(y.a)(a);function a(e){var t;return Object(f.a)(this,a),(t=r.call(this,e)).mounted=!1,t.state={},t}return Object(m.a)(a,[{key:"componentDidMount",value:(n=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.mounted=!0,e.next=3,this.loadFiles();case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"loadFiles",value:(t=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)("/playground/files");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.mounted&&this.setState({files:n.files});case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return this.state.files?Object(q.jsx)(b.a,{to:!this.state.files.length||1===this.state.files.length&&"Orders.js"===this.state.files[0].fileName?"/schema":"/build"}):Object(q.jsx)("div",{style:{textAlign:"center",padding:24},children:Object(q.jsx)(at.a,{})})}}]),a}(v.Component),So=n(489),Co=n(820),Do=n(837),To=Object(P.b)(Br.a)(lo||(lo=Object(w.a)(["\n  && {\n    .ant-modal-header {\n      border-bottom: none;\n      padding: 40px 32px 0 32px;\n\n      .ant-modal-title {\n        font-size: 20px;\n      }\n    }\n\n    .ant-modal-footer {\n      border-top: none;\n      padding: 0 32px 34px 32px;\n      text-align: left;\n    }\n  }\n"]))),Ro=Object(P.b)(Co.a)(po||(po=Object(w.a)(["\n  && {\n    .ant-form-item-label {\n      line-height: 16px;\n      margin-bottom: 7px;\n      label {\n        font-weight: 500;\n        font-size: 12px;\n        line-height: 16px;\n      }\n    }\n\n    .ant-dropdown-trigger {\n      padding: 5px 12px;\n    }\n  }\n"]))),Mo=Object(P.b)(Co.a.Item)(bo||(bo=Object(w.a)(["\n  && {\n    &:not(:last-child) {\n      margin-bottom: 16px;\n    }\n    \n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n"]))),Po=function(){return Object(q.jsx)(So.a,{style:{color:"#727290"}})},Eo=function(e){var t=e.visible,n=e.onOk,r=e.onCancel,a=e.onChange,i=e.chartLibraries,o=e.currentLibraryItem,s=e.frameworks,c=e.framework,u=e.frameworkItem,l=e.templatePackages,d=e.templatePackage,p=e.enableWebSocketTransport,b=Object(q.jsx)(R.a,{onClick:function(e){Re("Set Chart Library",{chartLibrary:e.key}),a("chartLibrary",e.key)},children:i.map((function(e){return Object(q.jsx)(R.a.Item,{children:e.title},e.value)}))}),h=Object(q.jsx)(R.a,{onClick:function(e){Re("Set Framework",{framework:e.key}),a("framework",e.key)},children:s.map((function(e){return Object(q.jsx)(R.a.Item,{children:e.title},e.id)}))}),f=Object(q.jsx)(R.a,{onClick:function(e){Re("Set Template Package",{templatePackageName:e.key}),a("templatePackageName",e.key)},children:(l||[]).map((function(e){return Object(q.jsx)(R.a.Item,{children:e.description},e.name)}))});return Object(q.jsx)(To,{title:"Create your own Dashboard App",visible:t,onOk:n,onCancel:r,footer:[Object(q.jsx)(be,{type:"primary",onClick:n,children:"Ok"},"submit"),Object(q.jsx)(be,{onClick:r,children:"Cancel"},"back")],children:Object(q.jsxs)(Ro,{children:[Object(q.jsx)(Mo,{label:"Framework",children:Object(q.jsx)(M.a,{overlay:h,children:Object(q.jsxs)(be,{children:[u&&u.title,Object(q.jsx)(Po,{})]})})}),!(null==u?void 0:u.scaffoldingSupported)&&Object(q.jsx)(O.a,{style:{marginBottom:23},type:"info",message:Object(q.jsxs)("span",{children:["We do not support ",u.title," dashboard scaffolding generation yet. Please refer to ",Object(q.jsxs)("a",{href:u.docsLink,target:"_blank",rel:"noopener noreferrer",onClick:function(){return Re("Unsupported Dashboard Framework Docs",{framework:c})},children:[u.title," docs"]})," to see on how to use it with Cube.js."]})}),Object(q.jsx)(Mo,{label:"Main Template",children:Object(q.jsx)(M.a,{overlay:f,disabled:!u.scaffoldingSupported,children:Object(q.jsxs)(be,{children:[d&&d.description,Object(q.jsx)(Po,{})]})})}),Object(q.jsx)(Mo,{label:"Charting Library",children:Object(q.jsx)(M.a,{overlay:b,disabled:!u.scaffoldingSupported,children:Object(q.jsxs)(be,{children:[o&&o.title,Object(q.jsx)(Po,{})]})})}),Object(q.jsx)(Mo,{label:"Web Socket Transport (Real-time)",children:Object(q.jsx)(Do.a,{disabled:"react"!==c.toLowerCase(),checked:p,onChange:function(e){return a("enableWebSocketTransport",e)}})})]})})},qo=function(e){var t=e.children;return Object(q.jsx)("div",{style:{margin:25},children:t})},Ao=P.b.div(ho||(ho=Object(w.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  margin: auto;\n  max-width: 1024px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: ",";\n"])),(function(e){return'url("'.concat(e.src,'")')})),Lo=Object(P.b)(je)(fo||(fo=Object(w.a)(["\n  && {\n    border: none;\n    border-radius: 8px;\n    margin-bottom: 24px;\n    padding: 16px;\n    ","\n\n    &:hover {\n      padding: 16px;\n      ","\n    }\n\n    button {\n      display: none;\n      position: absolute;\n      margin-left: -64px;\n      top: 80px;\n      left: 50%;\n    }\n\n    svg path {\n      transition: stroke 0.25s ease;\n    }\n\n    && .ant-card-cover {\n      height: 168px;\n      border-radius: 8px 8px 0 0;\n      background: ",";\n      display: flex;\n      align-items: center;\n      position: relative;\n      margin: -16px -16px 0 -16px;\n      padding: 24px 24px 0 24px;\n\n      &::after {\n        content: '';\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        background: rgba(81, 87, 125, 0.3);\n        opacity: 0;\n        transition: all 0.25s;\n        border-radius: 8px 8px 0 0;\n      }\n\n      div {\n        //box-shadow: 0 -1px 6px rgba(20, 20, 70, .06);\n        background-position: top;\n        border-radius: 4px 4px 0 0;\n      }\n    }\n\n    &&.ant-card-hoverable:hover {\n      box-shadow: 0 15px 20px rgba(67, 67, 107, 0.1);\n      button {\n        display: block;\n      }\n      &:hover .ant-card-cover:after {\n        opacity: ",";\n      }\n    }\n\n    svg path {\n      stroke: var(--primary-color);\n    }\n\n    && .ant-card-body {\n      min-height: 175px;\n      display: flex;\n      place-items: stretch;\n      place-content: start stretch;\n      text-align: left;\n      z-index: 1;\n      padding: 24px 0 16px;\n    }\n\n    && .ant-card-meta {\n      text-align: left;\n    }\n\n    && .ant-card-meta-title {\n      white-space: unset;\n      color: ",";\n      text-align: ",";\n      margin-bottom: 16px;\n    }\n\n    && .ant-card-meta-description {\n      color: ",";\n      opacity: ",";\n      font-size: 13px;\n      text-align: ",";\n      ","\n    }\n  }\n"])),(function(e){return e.createYourOwn?"\n      background: transparent;\n      border: 1px solid var(--purple-03-color);\n    ":""}),(function(e){return e.createYourOwn?"\n        border: 1px solid var(--purple-03-color);\n      ":"border: none;"}),(function(e){return e.createYourOwn?"transparent":"#DEDEF1"}),(function(e){return e.createYourOwn?"0":"1"}),(function(e){return e.createYourOwn?"var(--primary-color)":"var(--text-color)"}),(function(e){return e.createYourOwn?"center":"left"}),(function(e){return e.createYourOwn?"var(--primary-color)":"var(--dark-04-color)"}),(function(e){return e.createYourOwn?"0.8":1}),(function(e){return e.createYourOwn?"center":"left"}),(function(e){return e.createYourOwn?"padding: 0 32px;":""})),zo=Object(P.b)(ae.a.Text)(mo||(mo=Object(w.a)(["\n  display: block;\n  font-size: 16px;\n  margin-bottom: 24px;\n"]))),Fo=function(e){Object(j.a)(r,e);var t,n=Object(y.a)(r);function r(e){var t;return Object(f.a)(this,r),(t=n.call(this,e)).dashboardSource=new Bt,t.state={chartLibrary:io.react[0].value,framework:"react",templatePackageName:"react-antd-dynamic",templates:null},t}return Object(m.a)(r,[{key:"componentDidMount",value:(t=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dashboardSource.load(!0);case 2:return e.t0=this,e.t1=this.dashboardSource.loadError,e.next=6,this.dashboardSource.templates();case 6:e.t2=e.sent,e.t3={loadError:e.t1,templates:e.t2},e.t0.setState.call(e.t0,e.t3);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t,n=this,r=this.state,a=r.loadError,i=r.templates;if(a&&-1===a.indexOf("Dashboard app not found"))return Object(q.jsx)(b.a,{to:"/dashboard"});if(null==i)return Object(q.jsx)(ne,{});var o=this.state,s=o.chartLibrary,u=o.framework,d=o.templatePackageName,p=o.createOwnModalVisible,h=o.enableWebSocketTransport,f=this.props.history,m=io[u].find((function(e){return e.value===s})),j=eo.find((function(e){return e.id===u})),y=null===(e=this.dashboardSource)||void 0===e?void 0:e.templatePackages(u).find((function(e){return e.name===d})),v=i.map((function(e){var t=e.name,r=e.description,a=e.coverUrl;return Object(q.jsx)(Ae.a,{xs:{span:24},md:{span:12},lg:{span:8},xl:{span:6},style:{display:"flex"},children:Object(q.jsxs)(Lo,{hoverable:!0,bordered:!1,cover:Object(q.jsx)(Ao,{src:a}),children:[Object(q.jsx)(je.Meta,{title:t,description:r}),Object(q.jsx)(be,{type:"primary",onClick:Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.dashboardSource.applyTemplatePackages(t);case 2:f.push("/dashboard");case 3:case"end":return e.stop()}}),e)}))),children:"Create App"})]})},t)})).concat([Object(q.jsxs)(Ae.a,{xs:{span:24},md:{span:12},lg:{span:8},xl:{span:6},style:{display:"flex"},children:[Object(q.jsx)(Lo,{onClick:function(){return n.setState({createOwnModalVisible:!0})},hoverable:!0,createYourOwn:!0,bordered:!1,cover:Object(q.jsx)(la.a,{style:{fontSize:60}}),children:Object(q.jsx)(je.Meta,{title:"Create your Own",description:"Mix different templates together to create your own dashboard application"})}),Object(q.jsx)(Eo,{visible:p,onOk:Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n.setState({createOwnModalVisible:!1}),t="react"===u.toLowerCase()?["create-react-app",d,"".concat(s,"-charts"),"".concat(d.match(/^react-(\w+)/)[1],"-tables"),"react-credentials"].concat(h?["react-web-socket-transport"]:[]):"angular"===u.toLowerCase()?["create-ng-app",d,"ng2-charts","ng-credentials"]:["create-vue-app",d,"vue-chartkick-charts"],e.next=5,n.dashboardSource.applyTemplatePackages(t);case 5:f.push("/dashboard");case 6:case"end":return e.stop()}}),e)}))),onCancel:function(){return n.setState({createOwnModalVisible:!1})},onChange:function(e,t){if("framework"===e&&u!==t){var r,a,i,o=(null===(r=n.dashboardSource)||void 0===r?void 0:r.templatePackages(t))||[];n.setState({templatePackageName:null===(a=o[0])||void 0===a?void 0:a.name,chartLibrary:null===(i=io[t.toLowerCase()])||void 0===i?void 0:i[0].value})}n.setState({[e]:t})},chartLibraries:io[u],currentLibraryItem:m,frameworks:eo.filter((function(e){return"vanilla"!==e.id})),framework:u,frameworkItem:j,templatePackages:(null===(t=this.dashboardSource)||void 0===t?void 0:t.templatePackages(u))||[],templatePackage:y,enableWebSocketTransport:h&&"angular"!==u.toLowerCase()})]},"own")]);return Object(q.jsxs)(qo,{children:[Object(q.jsxs)(zo,{children:["Build your app from one the popular templates below or"," ",Object(q.jsx)("a",{onClick:function(){return n.setState({createOwnModalVisible:!0})},children:"create your own"})]}),Object(q.jsx)(qe.a,{gutter:24,children:v})]})}}]),r}(v.Component),Qo=Object(b.g)(Fo),_o=Object(h.b)();function Uo(){return No.apply(this,arguments)}function No(){return(No=Object(l.a)(c.a.mark((function e(){var t,n,r,a,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"",e.next=3,fetch("/playground/token",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({payload:JSON.parse(t)})});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,a=r.token,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}_o.listen((function(e){var t;t=e,De(Object(u.a)({event:"page"},t))})),p.a.render(Object(q.jsx)(b.c,{history:_o,children:Object(q.jsxs)(Pe,{children:[Object(q.jsx)(b.b,{exact:!0,path:"/",component:wo},"index"),Object(q.jsx)(b.b,{path:"/build",component:function(e){return Object(q.jsx)(Xr,{getToken:Uo,children:Object(q.jsx)(uo,Object(u.a)({},e))})}},"build"),Object(q.jsx)(b.b,{path:"/schema",component:ko},"schema"),Object(q.jsx)(b.b,{path:"/connection",component:function(){return Object(q.jsx)(Ut,{history:_o})}},"connection"),Object(q.jsx)(b.b,{path:"/dashboard",component:Kt},"dashboard"),Object(q.jsx)(b.b,{path:"/template-gallery",component:Qo},"template-gallery")]})}),document.getElementById("playground-root"))}});